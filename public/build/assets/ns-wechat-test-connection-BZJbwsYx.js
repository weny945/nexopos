import{_ as r}from"./lang-BINodpp-.js";import{_ as g}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{c as t,o as n,b as i,a,t as o,n as m,F as u,i as d}from"./runtime-core.esm-bundler-Cugm6hpa.js";const f={name:"ns-wechat-test-connection",data(){return{testing:!1,result:null}},methods:{__:r,testConnection(){this.testing=!0,this.result=null,nsHttpClient.post("/api/payment-codes/config/test",{type:"wechat"}).subscribe({next:s=>{this.testing=!1,s.success===!0?this.result={success:!0,message:s.message||r("Connection successful!"),details:JSON.stringify(s,null,2)}:this.result={success:!1,message:s.message||r("Connection failed"),details:JSON.stringify(s,null,2)}},error:s=>{this.testing=!1,this.result={success:!1,message:r("Connection failed: ")+(s.message||r("Unknown error")),details:JSON.stringify(s,null,2)}}})}}},h={class:"ns-wechat-test-connection"},b={class:"border border-box-edge rounded p-4 bg-box-background"},x={class:"font-semibold mb-2 text-fontcolor"},p={class:"text-sm text-fontcolor-light mb-3"},y={class:"flex items-center gap-2 flex-wrap"},C=["disabled"],k={key:0},w={key:1},v={key:0,class:"mt-3 p-3 bg-gray-100 rounded text-sm overflow-auto max-h-40"},N={class:"whitespace-pre-wrap text-xs text-fontcolor"};function S(s,l,T,B,e,c){return n(),t("div",h,[i("div",b,[i("h3",x,o(c.__("Test Connection")),1),i("p",p,o(c.__("Click the button below to test the WeChat Pay configuration and connection.")),1),i("div",y,[i("button",{onClick:l[0]||(l[0]=(..._)=>c.testConnection&&c.testConnection(..._)),disabled:e.testing,class:"px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[e.testing?(n(),t("span",k,o(c.__("Testing...")),1)):(n(),t("span",w,o(c.__("Test WeChat Pay Connection")),1))],8,C),e.result?(n(),t("span",{key:0,class:m([["text-sm",e.result.success?"text-green-500":"text-red-500"],"flex items-center"])},[e.result.success?(n(),t(u,{key:0},[d(" ✓ "+o(e.result.message),1)],64)):(n(),t(u,{key:1},[d(" ✗ "+o(e.result.message),1)],64))],2)):a("",!0)]),e.result&&e.result.details?(n(),t("div",v,[i("pre",N,o(e.result.details),1)])):a("",!0)])])}const W=g(f,[["render",S],["__scopeId","data-v-babbfd34"]]);export{W as default};
