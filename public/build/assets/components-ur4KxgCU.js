import{n as $,N as be,c as te,e as ge,f as ve,a as pe,g as ye,b as _e,h as xe,d as ke}from"./ns-prompt-popup-Bpr2kol9.js";import{N as we}from"./ns-avatar-BAhZCTsF.js";import{n as Ce}from"./ns-avatar-image-BfMW3dTV.js";import{_ as w}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{c as r,o as n,a as u,A as k,n as m,b as i,t as f,F as y,e as D,B as A,r as x,g as F,i as _,f as E,w as T,d as Se,j as U,C as Te,s as z,K as se,h as Y,D as le,E as De,G as J,k as Ee,u as ee}from"./runtime-core.esm-bundler-Cugm6hpa.js";import{h as S,n as C,p as ie,a as ne,F as G,P as V,B as Fe,b as H,S as Me}from"./bootstrap-CNAo4FMT.js";import{_ as b}from"./lang-BINodpp-.js";import{v as L,w as B,a as Z,b as re,d as de}from"./runtime-dom.esm-bundler-DUkN6N6G.js";const Oe={data:()=>({clicked:!1,_save:0}),props:["type","disabled","link","href","routerLink","to","target"],mounted(){},computed:{isDisabled(){return this.disabled&&(this.disabled.length===0||this.disabled==="disabled"||this.disabled)}}},je=["disabled"],Ae=["target","href"];function Pe(t,e,s,c,a,l){return n(),r("div",{class:m(["flex ns-button",s.type?s.type:"default"])},[!s.link&&!s.href?(n(),r("button",{key:0,disabled:l.isDisabled,class:"flex items-center justify-center py-2 px-3 font-semibold"},[k(t.$slots,"default")],8,je)):u("",!0),s.href?(n(),r("a",{key:1,target:s.target,href:s.href,class:"flex items-center justify-center py-2 px-3 font-semibold"},[k(t.$slots,"default")],8,Ae)):u("",!0)],2)}const Le=w(Oe,[["render",Pe]]),Re={name:"ns-calendar",props:["date","field","visible","range","selected-range","side"],data(){return{calendar:[[]],currentDay:S(),daysOfWeek:new Array(7).fill("").map((t,e)=>e),hours:0,minutes:0,currentView:"days",clickedOnCalendar:!1,moment:S,months:new Array(12).fill("").map((t,e)=>e)}},computed:{momentCopy(){return S()}},beforeUnmount(){document.removeEventListener("click",this.checkClickedItem)},mounted(){document.addEventListener("click",this.checkClickedItem),this.currentDay=[void 0,null,""].includes(this.date)?S():S(this.date),this.hours=this.currentDay.hours(),this.minutes=this.currentDay.minutes(),this.build(),this.toggleView("days")},methods:{__:b,handleCalendarClick(){this.clickedOnCalendar=!0},getDayClass({day:t,_dayIndex:e,dayOfWeek:s,_index:c,currentDay:a}){const l=[];return(S(this.date).isSame(t.date,"day")||this.isRangeEdge(t))&&!this.isInvalidRange()?l.push("bg-secondary text-fontcolor border-secondary text-white"):l.push("hover:bg-numpad-hover"),this.isInvalidRange()&&this.isRangeEdge(t)&&l.push("bg-error-secondary text-white"),c===0&&l.push("border-t border-tab-table-th"),this.isInRange(t)&&!this.isRangeEdge(t)?l.push("bg-tertiary"):t.isDifferentMonth&&!this.isRangeEdge(t)&&l.push("bg-tab-table-th"),l.join(" ")},erase(){this.selectDate({date:S(ns.date.current)})},isInRange(t){return this.range&&this.range.length===2&&this.range[0]&&this.range[1]?S(t.date).isSameOrAfter(this.range[0])&&S(t.date).isSameOrBefore(this.range[1]):!1},isInvalidRange(){return this.selectedRange&&this.selectedRange.endDate?S(this.selectedRange.startDate).isAfter(S(this.selectedRange.endDate))||S(this.selectedRange.endDate).isBefore(S(this.selectedRange.startDate)):!1},isRangeEdge(t){return this.range&&this.range.length===2&&this.range[0]&&this.range[1]?S(t.date).isSame(this.range[0],"day")||S(t.date).isSame(this.range[1],"day"):!1},setYear(t){parseInt(t.srcElement.value)>0&&parseInt(t.srcElement.value)<9999&&(this.currentDay.year(t.srcElement.value),this.selectDate({date:this.currentDay.clone()}))},subYear(){parseFloat(this.currentDay.format("YYYY"))>0&&(this.currentDay.subtract(1,"year"),this.selectDate({date:this.currentDay.clone()}))},addYear(){this.currentDay.add(1,"year"),this.selectDate({date:this.currentDay.clone()})},toggleView(t){this.currentView=t,this.currentView==="years"&&setTimeout(()=>{this.$refs.year.select()},100),this.currentView==="days"&&setTimeout(()=>{this.$refs.hours.addEventListener("focus",function(e){this.select()}),this.$refs.minutes.addEventListener("focus",function(e){this.select()})},100)},setMonth(t){this.currentDay.month(t),this.selectDate({date:this.currentDay.clone()})},detectHoursChange(){parseFloat(this.hours)<0&&(this.hours=0),parseFloat(this.hours)>23&&(this.hours=23),this.selectDate({date:this.currentDay.clone()})},detectMinuteChange(){parseFloat(this.minutes)<0&&(this.minutes=0),parseFloat(this.minutes)>59&&(this.minutes=59),this.selectDate({date:this.currentDay.clone()})},checkClickedItem(t){this.$parent.$el.getAttribute("class").split(" ").includes("picker")&&(!this.$parent.$el.contains(t.srcElement)&&!this.clickedOnCalendar&&this.visible&&this.$emit("onClickOut",!0),setTimeout(()=>{this.clickedOnCalendar=!1},100))},selectDate(t){if([void 0].includes(t))this.$emit("set",null);else{if(this.side==="left"&&S(this.selectedRange.endDate).isValid()&&t.date.isAfter(this.selectedRange.endDate))return C.error(b("The left range will be invalid.")),!1;if(this.side==="right"&&S(this.selectedRange.startDate).isValid()&&t.date.isBefore(this.selectedRange.startDate))return C.error(b("The right range will be invalid.")),!1;this.currentDay=t.date,this.currentDay.hours(this.hours),this.currentDay.minutes(this.minutes),this.$emit("set",this.currentDay.format("YYYY-MM-DD HH:mm:ss"))}this.build()},subMonth(){this.currentDay.subtract(1,"month"),this.build()},addMonth(){this.currentDay.add(1,"month"),this.build()},resetCalendar(){this.calendar=[[]]},build(){this.resetCalendar(),this.currentDay.clone().startOf("month");const t=this.currentDay.clone().startOf("month"),e=this.currentDay.clone().endOf("month");for(;;){t.day()===0&&this.calendar[0].length>0&&this.calendar.push([]);let s=this.calendar.length-1;if(this.calendar[s].push({date:t.clone(),dayOfWeek:t.day(),isToday:t.isSame(S.now(),"day"),isDifferentMonth:!1,isNextMonth:!1,isPreviousMonth:!1}),t.isSame(e,"day"))break;t.add(1,"day")}if(this.calendar[0].length<7){const s=7-this.calendar[0].length,c=this.calendar[0][0].date.clone(),a=[];for(let l=0;l<s;l++)c.subtract(1,"day"),a.unshift({date:c.clone(),dayOfWeek:c.day(),isToday:c.isSame(S.now(),"day"),isDifferentMonth:!0,isNextMonth:!1,isPreviousMonth:!0});this.calendar[0].unshift(...a)}if(this.calendar[this.calendar.length-1].length<7){const s=this.calendar.length-1,c=7-this.calendar[s].length,a=this.calendar[s][this.calendar[s].length-1].date.clone(),l=[];for(let o=0;o<c;o++)a.add(1,"day"),l.push({date:a.clone(),dayOfWeek:a.day(),isToday:a.isSame(S.now(),"day"),isDifferentMonth:!0,isNextMonth:!0,isPreviousMonth:!1});this.calendar[s].push(...l)}}}},He={key:0,class:"flex-auto"},Ie={class:"p-2 flex items-center"},Ve={class:"flex flex-auto font-semibold text-fontcolor justify-center"},Be={class:"h-32 flex grow-0 items-center justify-center text-fontcolor p-4"},Ye={class:"rounded input-group info border-2 flex overflow-hidden"},ze={class:"w-24 flex grow-0"},$e=["value"],Ue={class:"p-2"},qe={key:1,class:"flex-auto border-b border-box-background"},Ne={class:"p-2 flex items-center"},We={class:"flex flex-auto font-semibold text-fontcolor justify-center"},Ke={class:"mr-2 border-b border-secondary border-dashed"},Qe={class:"grid grid-flow-row grid-cols-3 grid-rows-1 gap-0 text-fontcolor divide-x divide-y border-b border-box-background"},Ge={class:"w-full h-full"},Ze=["onClick"],Xe={class:"p-2"},Je={key:2},et={class:"p-2 flex items-center"},tt={class:"flex flex-auto font-semibold text-fontcolor justify-center"},st={class:"grid grid-flow-row grid-cols-7 grid-rows-1 gap-0 text-fontcolor divide-x divide-y"},lt={class:"md:h-10 h-8 flex justify-center items-center border-tab-table-th text-sm"},it={class:"md:h-10 h-8 flex justify-center items-center border-tab-table-th text-sm"},nt={class:"md:h-10 h-8 flex justify-center items-center border-tab-table-th text-sm"},rt={class:"md:h-10 h-8 flex justify-center items-center border-tab-table-th text-sm"},dt={class:"md:h-10 h-8 flex justify-center items-center border-tab-table-th text-sm"},at={class:"md:h-10 h-8 flex justify-center items-center border-tab-table-th text-sm"},ot={class:"md:h-10 h-8 flex justify-center items-center border-tab-table-th text-sm"},ut=["onClick"],ct={key:0},ft={key:1,class:"text-fontcolor-soft"},ht={class:"border-t border-tab-table-th w-full p-2"},mt={class:"-mx-1 flex justify-between"},bt={class:"px-1"},gt={class:"-mx-1 flex"},vt={class:"px-1"},pt={class:"px-2"},yt={key:0,class:"rounded border-tab-table-th-edge flex items-center justify-center p-1 border"};function _t(t,e,s,c,a,l){return n(),r("div",{onClick:e[21]||(e[21]=o=>l.handleCalendarClick()),class:"flex bg-box-background flex-col rounded-lg overflow-hidden"},[a.currentView==="years"?(n(),r("div",He,[i("div",Ie,[i("div",null,[i("button",{onClick:e[0]||(e[0]=o=>l.subMonth()),class:"w-8 h-8 ns-inset-button border outline-hidden text-numpad-text rounded"},[...e[22]||(e[22]=[i("i",{class:"las la-angle-left"},null,-1)])])]),i("div",Ve,[i("span",{class:"mr-2 cursor-pointer border-b border-secondary border-dashed",onClick:e[1]||(e[1]=o=>l.toggleView("months"))},f(a.currentDay.format("MMM")),1),i("span",{class:"cursor-pointer border-b border-secondary border-dashed",onClick:e[2]||(e[2]=o=>l.toggleView("years"))},f(a.currentDay.format("YYYY")),1)]),i("div",null,[i("button",{onClick:e[3]||(e[3]=o=>l.addMonth()),class:"w-8 h-8 ns-inset-button border outline-hidden text-numpad-text rounded"},[...e[23]||(e[23]=[i("i",{class:"las la-angle-right"},null,-1)])])])]),i("div",Be,[i("div",Ye,[i("button",{onClick:e[4]||(e[4]=o=>l.subYear()),class:"px-2 py-2"},[...e[24]||(e[24]=[i("i",{class:"las la-minus"},null,-1)])]),i("div",ze,[i("input",{type:"text",ref:"year",class:"p-2 flex-auto w-full text-center outline-hidden",onChange:e[5]||(e[5]=o=>l.setYear(o)),value:a.currentDay.format("YYYY")},null,40,$e)]),i("button",{onClick:e[6]||(e[6]=o=>l.addYear()),class:"px-2 py-2"},[...e[25]||(e[25]=[i("i",{class:"las la-plus"},null,-1)])])])]),i("div",Ue,[i("button",{onClick:e[7]||(e[7]=o=>l.toggleView("days")),class:"p-2 w-full ns-inset-button border text-sm error hover:text-white rounded flex items-center justify-center"},f(l.__("Return To Calendar")),1)])])):u("",!0),a.currentView==="months"?(n(),r("div",qe,[i("div",Ne,[i("div",null,[i("button",{onClick:e[8]||(e[8]=o=>l.subYear()),class:"w-8 h-8 ns-inset-button outline-hidden border rounded"},[...e[26]||(e[26]=[i("i",{class:"las la-angle-left"},null,-1)])])]),i("div",We,[i("span",Ke,f(a.currentDay.format("MMM")),1),i("span",{class:"cursor-pointer border-b border-secondary border-dashed",onClick:e[9]||(e[9]=o=>l.toggleView("years"))},f(a.currentDay.format("YYYY")),1)]),i("div",null,[i("button",{onClick:e[10]||(e[10]=o=>l.addYear()),class:"w-8 h-8 ns-inset-button outline-hidden border rounded"},[...e[27]||(e[27]=[i("i",{class:"las la-angle-right"},null,-1)])])])]),i("div",Qe,[(n(!0),r(y,null,D(a.months,(o,d)=>(n(),r("div",{key:d,class:"h-8 flex justify-center items-center text-sm border-box-background"},[i("div",Ge,[i("div",{class:m([l.momentCopy.month(o).format("MM")===a.currentDay.format("MM")?"bg-secondary text-white":"hover:bg-numpad-hover","h-full w-full border-box-background flex items-center justify-center cursor-pointer"]),onClick:h=>l.setMonth(o)},f(l.momentCopy.format("MMM")),11,Ze)])]))),128))]),i("div",Xe,[i("button",{onClick:e[11]||(e[11]=o=>l.toggleView("days")),class:"p-2 w-full ns-inset-button border text-sm error rounded flex items-center justify-center"},f(l.__("Return To Calendar")),1)])])):u("",!0),a.currentView==="days"?(n(),r("div",Je,[i("div",et,[i("div",null,[i("button",{onClick:e[12]||(e[12]=o=>l.subMonth()),class:"w-8 h-8 ns-inset-button border rounded"},[...e[28]||(e[28]=[i("i",{class:"las la-angle-left"},null,-1)])])]),i("div",tt,[i("span",{class:"mr-2 cursor-pointer border-b border-secondary border-dashed",onClick:e[13]||(e[13]=o=>l.toggleView("months"))},f(a.currentDay.format("MMM")),1),i("span",{class:"cursor-pointer border-b border-secondary border-dashed",onClick:e[14]||(e[14]=o=>l.toggleView("years"))},f(a.currentDay.format("YYYY")),1)]),i("div",null,[i("button",{onClick:e[15]||(e[15]=o=>l.addMonth()),class:"w-8 h-8 ns-inset-button border rounded"},[...e[29]||(e[29]=[i("i",{class:"las la-angle-right"},null,-1)])])])]),i("div",st,[i("div",lt,f(l.__("Sun")),1),i("div",it,f(l.__("Mon")),1),i("div",nt,f(l.__("Tue")),1),i("div",rt,f(l.__("Wed")),1),i("div",dt,f(l.__("Thr")),1),i("div",at,f(l.__("Fri")),1),i("div",ot,f(l.__("Sat")),1)]),(n(!0),r(y,null,D(a.calendar,(o,d)=>(n(),r("div",{key:d,class:"grid grid-flow-row grid-cols-7 grid-rows-1 gap-0 text-fontcolor divide-x divide-y"},[(n(!0),r(y,null,D(a.daysOfWeek,(h,g)=>(n(),r("div",{key:g,class:"md:h-10 h-8 flex justify-center items-center text-sm border-tab-table-th"},[(n(!0),r(y,null,D(o,(v,M)=>(n(),r(y,null,[v.dayOfWeek===h?(n(),r("div",{key:M,class:m([l.getDayClass({day:v,_dayIndex:M,dayOfWeek:h,_index:g,currentDay:a.currentDay}),"h-full w-full flex items-center justify-center cursor-pointer"]),onClick:O=>l.selectDate(v)},[v.isDifferentMonth?u("",!0):(n(),r("span",ct,f(v.date.format("DD")),1)),v.isDifferentMonth?(n(),r("span",ft,f(v.date.format("DD")),1)):u("",!0)],10,ut)):u("",!0)],64))),256))]))),128))]))),128))])):u("",!0),i("div",ht,[i("div",mt,[i("div",bt,[i("div",gt,[i("div",vt,[i("button",{onClick:e[16]||(e[16]=o=>l.erase()),class:"border ns-inset-button text-sm error rounded md:w-10 w-8 md:h-10 h-8 flex items-center justify-center"},[...e[30]||(e[30]=[i("i",{class:"las la-trash text-lg"},null,-1)])])])])]),i("div",pt,[a.currentView==="days"?(n(),r("div",yt,[e[31]||(e[31]=i("span",{class:"pr-2 pl-1 text-font"},[i("i",{class:"las la-clock"})],-1)),A(i("input",{placeholder:"HH",ref:"hours",onChange:e[17]||(e[17]=o=>l.detectHoursChange(o)),class:"w-12 p-1 text-center border border-numpad-edge bg-input-background outline-hidden text-sm active:border-numpad-edge","onUpdate:modelValue":e[18]||(e[18]=o=>a.hours=o),type:"number"},null,544),[[L,a.hours]]),e[32]||(e[32]=i("span",{class:"mx-1"},":",-1)),A(i("input",{placeholder:"mm",ref:"minutes",onChange:e[19]||(e[19]=o=>l.detectMinuteChange(o)),class:"w-12 p-1 text-center border border-numpad-edge bg-input-background outline-hidden text-sm active:border-numpad-edge","onUpdate:modelValue":e[20]||(e[20]=o=>a.minutes=o),type:"number"},null,544),[[L,a.minutes]])])):u("",!0)])])])])}const ae=w(Re,[["render",_t]]),xt={data:()=>({}),emits:["change"],props:["checked","field","label","class"],computed:{isChecked(){return this.field?this.field.value:this.checked},hasError(){return!!(this.field&&this.field.errors!==void 0&&this.field.errors.length>0)}},methods:{toggleIt(){this.field!==void 0&&(this.field.value=!this.field.value),this.$emit("change",!this.checked)}}},kt={class:"w-5 h-5 flex border items-center justify-center cursor-pointer"},wt={key:0,class:"mx-2"},Ct={key:1,class:"mx-2"};function St(t,e,s,c,a,l){const o=x("ns-field-description");return n(),r("div",{class:m(s.field?"flex flex-col":"")},[i("div",{class:m(["ns-checkbox cursor-pointer flex",(l.isChecked?"checked":"")+" "+(s.field?l.hasError?"has-error":"is-pristine":"justify-center items-center")]),onClick:e[0]||(e[0]=d=>l.toggleIt())},[i("div",kt,[i("i",{class:m([l.isChecked?"visible":"invisible","las la-check"])},null,2)]),s.label?(n(),r("label",wt,f(s.label),1)):u("",!0),s.field&&s.field.label?(n(),r("label",Ct,f(s.field.label),1)):u("",!0)],2),s.field&&s.field.description?(n(),F(o,{key:0,field:s.field},null,8,["field"])):u("",!0)],2)}const Tt=w(xt,[["render",St]]),Dt={name:"ns-close-button",methods:{}},Et={class:"outline-hidden ns-close-button hover:border-transparent border rounded-full h-6 min-w-[1.5rem] flex items-center justify-center"};function Ft(t,e,s,c,a,l){return n(),r("button",Et,[e[0]||(e[0]=i("i",{class:"las la-times text-sm"},null,-1)),e[1]||(e[1]=_()),k(t.$slots,"default")])}const Mt=w(Dt,[["render",Ft]]),Ot={data(){return{fields:[],validation:new G}},props:["popup"],methods:{__:b,popupCloser:ne,popupResolver:ie,closePopup(){this.popupResolver(!1)},useFilters(){this.popupResolver(this.validation.extractFields(this.fields))},clearFilters(){this.fields.forEach(t=>t.value=""),this.popupResolver(null)}},mounted(){this.fields=this.validation.createFields(this.popup.params.queryFilters),this.popupCloser()}},jt={class:"ns-box shadow-lg w-95vw h-95vh md:w-[60vw] md:h-[83-vh] flex flex-col"},At={class:"p-2 border-b ns-box-header flex justify-between items-center"},Pt={class:"p-2 ns-box-body flex-auto"},Lt={class:"p-2 flex justify-between ns-box-footer border-t"};function Rt(t,e,s,c,a,l){const o=x("ns-close-button"),d=x("ns-field"),h=x("ns-button");return n(),r("div",jt,[i("div",At,[i("h3",null,f(l.__("Search Filters")),1),i("div",null,[E(o,{onClick:e[0]||(e[0]=g=>l.closePopup())})])]),i("div",Pt,[(n(!0),r(y,null,D(a.fields,(g,v)=>(n(),F(d,{field:g,key:v},null,8,["field"]))),128))]),i("div",Lt,[i("div",null,[E(h,{onClick:e[1]||(e[1]=g=>l.clearFilters()),type:"error"},{default:T(()=>[_(f(l.__("Clear Filters")),1)]),_:1})]),i("div",null,[E(h,{onClick:e[2]||(e[2]=g=>l.useFilters()),type:"info"},{default:T(()=>[_(f(l.__("Use Filters")),1)]),_:1})])])])}const Ht=w(Ot,[["render",Rt]]),It={data:()=>({prependOptions:!1,showOptions:!0,showCheckboxes:!0,isRefreshing:!1,sortColumn:"",searchInput:"",queryFiltersString:"",searchQuery:"",page:1,bulkAction:"",bulkActions:[],queryFilters:[],headerButtons:[],withFilters:!1,selectedEntriesSubject:new RxJS.BehaviorSubject([]),columns:[],selectedEntries:[],globallyChecked:!1,showSelectedEntries:!0,crudConfig:{},result:{current_page:null,data:[],first_page_url:null,from:null,last_page:null,last_page_url:null,next_page_url:null,path:null,per_page:null,prev_page_url:null,to:null,total:null}}),name:"ns-crud",mounted(){this.identifier!==void 0&&nsCrudHandler.defineInstance(this.identifier,this),this.restoreState(),this.loadConfig()},watch:{selectedEntries:{deep:!0,handler(t){this.selectedEntriesSubject.next(t),this.result.data.forEach(e=>{t.filter(c=>c.$id===e.$id).length>0?e.$checked=!0:e.$checked=!1})}}},props:["src","createUrl","mode","identifier","queryParams","popup"],computed:{getParsedSrc(){return`${this.src}?${this.sortColumn}${this.searchQuery}${this.queryFiltersString}${this.queryPage}${this.getQueryParams()?"&"+this.getQueryParams():""}`},showQueryFilters(){return this.queryFilters.length>0},getSelectedAction(){const t=this.bulkActions.filter(e=>e.identifier===this.bulkAction);return t.length>0?t[0]:!1},pagination(){return this.result?this.pageNumbers(this.result.last_page,this.result.current_page):[]},queryPage(){return this.result?`&page=${this.page}`:""},resultInfo(){return b("displaying {perPage} on {items} items").replace("{perPage}",this.result.per_page||0).replace("{items}",this.result.total||0)},headerButtonsComponents(){return this.headerButtons.map(t=>Se(()=>new Promise(e=>{e(nsExtraComponents[t])})))}},methods:{__:b,getStorageKey(){return`ns-crud-state-${this.src.replace(/[^a-zA-Z0-9]/g,"_")}`},saveState(){let t=[];this.columns&&typeof this.columns=="object"&&(t=Object.keys(this.columns).map(s=>({key:s,$sorted:this.columns[s].$sorted,$direction:this.columns[s].$direction})));const e={searchInput:this.searchInput,searchQuery:this.searchQuery,page:this.page,sortColumn:this.sortColumn,queryFiltersString:this.queryFiltersString,withFilters:this.withFilters,columns:t};sessionStorage.setItem(this.getStorageKey(),JSON.stringify(e))},restoreState(){try{const t=sessionStorage.getItem(this.getStorageKey());if(t){const e=JSON.parse(t);this.searchInput=e.searchInput||"",this.searchQuery=e.searchQuery||"",this.page=e.page||1,this.sortColumn=e.sortColumn||"",this.queryFiltersString=e.queryFiltersString||"",this.withFilters=e.withFilters||!1}}catch(t){console.warn("Failed to restore CRUD state:",t)}},restoreColumnSortState(){try{const t=sessionStorage.getItem(this.getStorageKey());if(t){const e=JSON.parse(t);e.columns&&this.columns&&e.columns.forEach(s=>{this.columns[s.key]&&(this.columns[s.key].$sorted=s.$sorted,this.columns[s.key].$direction=s.$direction)})}}catch(t){console.warn("Failed to restore column sort state:",t)}},getQueryParams(){return this.queryParams?Object.keys(this.queryParams).map(t=>`${t}=${this.queryParams[t]}`).join("&"):""},pageNumbers(t,e){var s=[];e-3>1&&s.push(1,"...");for(let c=1;c<=t;c++)e+3>c&&e-3<c&&s.push(c);return e+3<t&&s.push("...",t),s.filter(c=>c>0||typeof c=="string")},handleHeaderButtonUpdate(t){for(let e in t)["selectedEntries","page","bulkAction","searchInput","globallyChecked","sortColumn","searchQuery","queryFiltersString","withFilters","bulkActions"].includes(e)&&(this[e]=t[e])},downloadContent(){nsHttpClient.post(`${this.src}/export?${this.getParsedSrc}`,{entries:this.selectedEntries.map(t=>t.$id)}).subscribe(t=>{setTimeout(()=>document.location=t.url,300),C.success(b("The document has been generated."))},t=>{C.error(t.message||b("Unexpected error occurred."))})},clearSelectedEntries(){V.show($,{title:b("Clear Selected Entries ?"),message:b("Would you like to clear all selected entries ?"),onAction:t=>{t&&(this.selectedEntries=[],this.handleGlobalChange(!1))}})},refreshRow(t){if(t.$checked===!0)this.selectedEntries.filter(s=>s.$id===t.$id).length===0&&this.selectedEntries.push(t);else{const e=this.selectedEntries.filter(s=>s.$id===t.$id);if(e.length>0){const s=this.selectedEntries.indexOf(e[0]);this.selectedEntries.splice(s,1)}}},handleShowOptions(t){this.result.data.forEach(e=>{e.$id!==t.$id&&(e.$toggled=!1)})},handleGlobalChange(t){this.globallyChecked=t,this.result.data.forEach(e=>{e.$checked=t,this.refreshRow(e)})},loadConfig(){nsHttpClient.get(`${this.src}/config?${this.getQueryParams()}`).subscribe(e=>{this.crudConfig=e,this.columns=e.columns,this.bulkActions=e.bulkActions,this.queryFilters=e.queryFilters,this.prependOptions=e.prependOptions,this.showOptions=e.showOptions,this.showCheckboxes=e.showCheckboxes,this.headerButtons=e.headerButtons||[],this.showSelectedEntries=e.showSelectedEntries,this.$nextTick(()=>{this.restoreColumnSortState()}),this.refresh()},e=>{C.error(e.message,"OK",{duration:!1})})},cancelSearch(){this.searchInput="",this.searchQuery="",this.page=1,this.saveState(),this.refresh()},search(){this.searchInput?this.searchQuery=`&search=${this.searchInput}`:this.searchQuery="",this.page=1,this.saveState(),this.refresh()},sort(t){if(this.columns[t].$sort===!1)return C.error(b("Sorting is explicitely disabled on this column"));for(let e in this.columns)e!==t&&(this.columns[e].$sorted=!1,this.columns[e].$direction="");switch(this.columns[t].$sorted=!0,this.columns[t].$direction){case"asc":this.columns[t].$direction="desc";break;case"desc":this.columns[t].$direction="";break;case"":default:this.columns[t].$direction="asc";break}["asc","desc"].includes(this.columns[t].$direction)?this.sortColumn=`active=${t}&direction=${this.columns[t].$direction}`:this.sortColumn="",this.$emit("sort",this.columns[t]),this.saveState(),this.refresh()},bulkDo(){if(this.bulkAction)if(this.selectedEntries.length>0){if(confirm(this.getSelectedAction.confirm||b("Would you like to perform the selected bulk action on the selected entries ?")))return nsHttpClient.post(`${this.src}/bulk-actions`,{action:this.bulkAction,entries:this.selectedEntries.map(t=>t.$id)}).subscribe({next:t=>{C.info(t.message),this.selectedEntries=[],this.refresh()},error:t=>{C.error(t.message)}})}else return C.error(b("No selection has been made."));else return C.error(b("No action has been selected."))},async openQueryFilter(){try{const t=await new Promise((e,s)=>{V.show(Ht,{resolve:e,reject:s,queryFilters:this.queryFilters})});this.withFilters=!1,this.queryFiltersString="",t!==null&&(this.withFilters=!0,this.queryFiltersString="&queryFilters="+encodeURIComponent(JSON.stringify(t))),this.saveState(),this.refresh()}catch{}},refresh(){this.globallyChecked=!1,this.isRefreshing=!0,nsHttpClient.get(`${this.getParsedSrc}`).subscribe(e=>{e.data=e.data.map(s=>(this.selectedEntries.filter(a=>a.$id===s.$id).length>0&&(s.$checked=!0),s)),this.isRefreshing=!1,this.result=e,this.page=e.current_page,this.saveState()},e=>{this.isRefreshing=!1,C.error(e.message)})}}},Vt={key:0,id:"crud-table-header",class:"p-2 flex flex-col md:flex-row justify-between flex-wrap"},Bt={id:"crud-search-box",class:"w-full md:w-auto -mx-2 mb-2 md:mb-0 flex"},Yt={key:0,class:"px-2 flex items-center justify-center"},zt=["href"],$t={class:"px-2"},Ut={class:"rounded-full p-1 ns-crud-input flex"},qt={class:"px-2 flex items-center justify-center"},Nt={key:1,class:"px-2 flex items-center"},Wt={key:0,class:"las la-filter"},Kt={key:1,class:"las la-check"},Qt={key:2,class:"ml-1"},Gt={key:3,class:"ml-1"},Zt={key:2,id:"custom-buttons"},Xt={id:"crud-buttons",class:"-mx-1 flex flex-wrap w-full md:w-auto"},Jt={key:0,class:"px-1 flex items-center"},es={class:"px-1 flex items-center"},ts={id:"crud-table-body",class:"flex"},ss={class:"overflow-x-auto flex-auto"},ls={key:0,class:"table ns-table w-full"},is={key:0,class:"text-center p-1 border w-16 align-middle"},rs={key:1,class:"text-left p-1 w-16 border"},ds=["onClick"],as={class:"w-full flex justify-between items-center"},os={class:"flex"},us={class:"h-6 w-6 flex justify-center items-center"},cs={key:0,class:"las la-sort-amount-up"},fs={key:1,class:"las la-sort-amount-down"},hs={key:2,class:"text-left p-1 w-16 border"},ms={key:1},bs=["colspan"],gs={class:"p-2 flex flex-col md:flex-row justify-between footer"},vs={key:0,id:"grouped-actions",class:"mb-2 md:mb-0 flex justify-between rounded-full ns-crud-input p-1"},ps={class:"bg-input-disabled",selected:"",value:""},ys=["value"],_s={class:"flex"},xs={class:"items-center flex text-fontcolor mx-4 text-sm"},ks={id:"pagination",class:"flex items-center -mx-1"},ws=["onClick"];function Cs(t,e,s,c,a,l){const o=x("ns-checkbox"),d=x("ns-table-row");return n(),r("div",{id:"crud-table",class:m(["w-full rounded-lg",s.mode!=="light"?"shadow mb-8":""])},[s.mode!=="light"?(n(),r("div",Vt,[i("div",Bt,[s.createUrl?(n(),r("div",Yt,[i("a",{href:s.createUrl||"#",class:"rounded-full ns-crud-button text-sm h-10 flex items-center justify-center cursor-pointer px-3 outline-hidden border"},[...e[18]||(e[18]=[i("i",{class:"las la-plus"},null,-1)])],8,zt)])):u("",!0),i("div",$t,[i("div",Ut,[A(i("input",{onKeypress:e[0]||(e[0]=B(h=>l.search(),["enter"])),"onUpdate:modelValue":e[1]||(e[1]=h=>t.searchInput=h),type:"text",class:"w-36 md:w-auto bg-transparent outline-hidden px-2"},null,544),[[L,t.searchInput]]),i("button",{onClick:e[2]||(e[2]=h=>l.search()),class:"rounded-full w-8 h-8 outline-hidden ns-crud-input-button"},[...e[19]||(e[19]=[i("i",{class:"las la-search"},null,-1)])]),t.searchQuery?(n(),r("button",{key:0,onClick:e[3]||(e[3]=h=>l.cancelSearch()),class:"ml-1 rounded-full w-8 h-8 outline-hidden ns-crud-input-button error"},[...e[20]||(e[20]=[i("i",{class:"las la-times"},null,-1)])])):u("",!0)])]),i("div",qt,[i("button",{onClick:e[4]||(e[4]=h=>l.refresh()),class:"rounded-full text-sm h-10 px-3 outline-hidden border ns-crud-button"},[i("i",{class:m([t.isRefreshing?"animate-spin":"","las la-sync"])},null,2)])]),l.showQueryFilters?(n(),r("div",Nt,[i("button",{onClick:e[5]||(e[5]=h=>l.openQueryFilter()),class:m([t.withFilters?"table-filters-enabled":"table-filters-disabled","ns-crud-button border rounded-full text-sm h-10 px-3 outline-hidden"])},[t.withFilters?u("",!0):(n(),r("i",Wt)),t.withFilters?(n(),r("i",Kt)):u("",!0),t.withFilters?u("",!0):(n(),r("span",Qt,f(l.__("Filters")),1)),t.withFilters?(n(),r("span",Gt,f(l.__("Has Filters")),1)):u("",!0)],2)])):u("",!0),l.headerButtonsComponents.length>0?(n(),r("div",Zt,[(n(!0),r(y,null,D(l.headerButtonsComponents,(h,g)=>(n(),F(U(h),{onUpdate:e[6]||(e[6]=v=>l.handleHeaderButtonUpdate(v)),config:t.crudConfig,onRefresh:e[7]||(e[7]=v=>l.refresh()),selectedSubject:t.selectedEntriesSubject,result:t.result,key:g},null,40,["config","selectedSubject","result"]))),128))])):u("",!0)]),i("div",Xt,[t.selectedEntries.length>0&&t.showSelectedEntries?(n(),r("div",Jt,[i("button",{onClick:e[8]||(e[8]=h=>l.clearSelectedEntries()),class:"flex justify-center items-center rounded-full text-sm h-10 px-3 outline-hidden ns-crud-button border"},[e[21]||(e[21]=i("i",{class:"lar la-check-square"},null,-1)),_(" "+f(l.__("{entries} entries selected").replace("{entries}",t.selectedEntries.length)),1)])])):u("",!0),i("div",es,[i("button",{onClick:e[9]||(e[9]=h=>l.downloadContent()),class:"flex justify-center items-center rounded-full text-sm h-10 px-3 ns-crud-button border outline-hidden"},[e[22]||(e[22]=i("i",{class:"las la-download"},null,-1)),_(" "+f(l.__("Download")),1)])])])])):u("",!0),i("div",ts,[i("div",ss,[Object.values(t.columns).length>0?(n(),r("table",ls,[i("thead",null,[i("tr",null,[t.showCheckboxes?(n(),r("th",is,[E(o,{class:"inline-block",checked:t.globallyChecked,onChange:e[10]||(e[10]=h=>l.handleGlobalChange(h))},null,8,["checked"])])):u("",!0),t.prependOptions&&t.showOptions?(n(),r("th",rs)):u("",!0),(n(!0),r(y,null,D(t.columns,(h,g)=>(n(),r("th",{key:g,onClick:v=>l.sort(g),style:Te({width:h.width||"auto","max-width":h.maxWidth||"auto","min-width":h.minWidth||"auto"}),class:"cursor-pointer justify-between border text-left p-1"},[i("div",as,[i("span",os,f(h.label),1),i("span",us,[h.$direction==="desc"?(n(),r("i",cs)):u("",!0),h.$direction==="asc"?(n(),r("i",fs)):u("",!0)])])],12,ds))),128)),!t.prependOptions&&t.showOptions?(n(),r("th",hs)):u("",!0)])]),i("tbody",null,[t.result.data!==void 0&&t.result.data.length>0?(n(!0),r(y,{key:0},D(t.result.data,(h,g)=>(n(),F(d,{key:g,onUpdated:e[11]||(e[11]=v=>l.refreshRow(v)),columns:t.columns,prependOptions:t.prependOptions,showOptions:t.showOptions,showCheckboxes:t.showCheckboxes,row:h,onReload:e[12]||(e[12]=v=>l.refresh()),onToggled:e[13]||(e[13]=v=>l.handleShowOptions(v))},null,8,["columns","prependOptions","showOptions","showCheckboxes","row"]))),128)):u("",!0),!t.result||t.result.data.length===0?(n(),r("tr",ms,[i("td",{colspan:Object.values(t.columns).length+2,class:"text-center border py-3"},f(l.__("There is nothing to display...")),9,bs)])):u("",!0)])])):u("",!0)])]),i("div",gs,[t.bulkActions.length>0?(n(),r("div",vs,[A(i("select",{class:"outline-hidden bg-transparent","onUpdate:modelValue":e[14]||(e[14]=h=>t.bulkAction=h),id:"grouped-actions"},[i("option",ps,[k(t.$slots,"bulk-label",{},()=>[_(f(l.__("Bulk Actions")),1)])]),(n(!0),r(y,null,D(t.bulkActions,(h,g)=>(n(),r("option",{class:"bg-input-disabled",key:g,value:h.identifier},f(h.label),9,ys))),128))],512),[[Z,t.bulkAction]]),i("button",{onClick:e[15]||(e[15]=h=>l.bulkDo()),class:"ns-crud-input-button h-8 px-3 text-sm outline-hidden rounded-full flex items-center justify-center"},[k(t.$slots,"bulk-go",{},()=>[_(f(l.__("Apply")),1)])])])):u("",!0),i("div",_s,[i("div",xs,f(l.resultInfo),1),i("div",ks,[t.result.current_page?(n(),r(y,{key:0},[i("a",{href:"javascript:void(0)",onClick:e[16]||(e[16]=h=>{t.page=t.result.first_page,l.refresh()}),class:"mx-1 flex items-center justify-center h-8 w-8 rounded-full ns-crud-button border shadow"},[...e[23]||(e[23]=[i("i",{class:"las la-angle-double-left"},null,-1)])]),(n(!0),r(y,null,D(l.pagination,(h,g)=>(n(),r(y,null,[t.page!=="..."?(n(),r("a",{key:g,class:m([t.page==h?"active":"","mx-1 flex items-center justify-center h-8 w-8 rounded-full ns-crud-button border"]),onClick:v=>{t.page=h,l.refresh()},href:"javascript:void(0)"},f(h),11,ws)):u("",!0),t.page==="..."?(n(),r("a",{key:g,href:"javascript:void(0)",class:"mx-1 flex items-center justify-center h-8 w-8 rounded-full ns-crud-button border"},"...")):u("",!0)],64))),256)),i("a",{href:"javascript:void(0)",onClick:e[17]||(e[17]=h=>{t.page=t.result.last_page,l.refresh()}),class:"mx-1 flex items-center justify-center h-8 w-8 rounded-full ns-crud-button border shadow"},[...e[24]||(e[24]=[i("i",{class:"las la-angle-double-right"},null,-1)])])],64)):u("",!0)])])])],2)}const Ss=w(It,[["render",Cs]]),Ts={data:()=>({form:{},globallyChecked:!1,formValidation:new G,links:{},rows:[],optionAttributes:{},extraComponents:()=>nsExtraComponents,nsComponents:()=>nsComponents}),emits:["updated","saved"],mounted(){this.loadForm()},props:["src","createUrl","fieldClass","submitUrl","submitMethod","disableTabs","queryParams","popup"],computed:{activeTabFields(){for(let t in this.form.tabs)if(this.form.tabs[t].active)return this.form.tabs[t].fields;return[]},activeTab(){for(let t in this.form.tabs)if(this.form.tabs[t].active)return this.form.tabs[t];return!1},activeTabIdentifier(){for(let t in this.form.tabs)if(this.form.tabs[t].active)return t;return{}},extractedForm(){return this.formValidation.extractForm(this.form)},extractedFormLabels(){return this.formValidation.extractFormLabels(this.form)}},methods:{__:b,popupResolver:ie,toggle(t){for(let e in this.form.tabs)this.form.tabs[e].active=!1;this.form.tabs[t].active=!0},async handleSaved(t,e,s){this.form.tabs[e].fields.filter(c=>{c.name===s.name&&t.data.entry&&(c.options.push({label:t.data.entry[this.optionAttributes.label],value:t.data.entry[this.optionAttributes.value]}),c.value=t.data.entry.id)})},handleClose(){this.popup&&this.popupResolver(!1)},submit(){if(this.formValidation.validateForm(this.form).length>0)return C.error(b("The form is not valid. Double check it or refer to the error dislayed above."),b("Close"));if(this.formValidation.disableForm(this.form),this.submitUrl===void 0)return C.error(b("No submit URL was provided"),b("Okay"));H[this.submitMethod?this.submitMethod.toLowerCase():"post"](this.appendQueryParamas(this.submitUrl),this.formValidation.extractForm(this.form)).subscribe(e=>{if(e.status==="success")if(this.popup)this.popupResolver(e);else{if(this.submitMethod&&this.submitMethod.toLowerCase()==="post"&&this.links.list!==!1)return document.location=e.data.editUrl||this.links.list;C.info(e.message,b("Okay"),{duration:3e3}),this.$emit("saved",e)}this.formValidation.enableForm(this.form)},e=>{C.error(e.message,void 0,{duration:5e3}),e.data!==void 0&&this.formValidation.triggerError(this.form,e.data),this.formValidation.enableForm(this.form)})},handleGlobalChange(t){this.globallyChecked=t,this.rows.forEach(e=>e.$checked=t)},loadForm(){return new Promise((t,e)=>{H.get(`${this.appendQueryParamas(this.src)}`).subscribe({next:c=>{t(c),this.form=this.parseForm(c.form),this.links=c.links,this.optionAttributes=c.optionAttributes,nsHooks.doAction("ns-crud-form-loaded",this),this.form.main&&setTimeout(()=>{this.$el.querySelector("#crud-form input").focus()},100),this.$emit("updated",this.form)},error:c=>{e(c),C.error(c.message,b("Okay"),{duration:0})}})})},appendQueryParamas(t){if(this.queryParams===void 0)return t;const e=Object.keys(this.queryParams).map(s=>`${encodeURIComponent(s)}=${encodeURIComponent(this.queryParams[s])}`).join("&");return t.includes("?")?`${t}&${e}`:`${t}?${e}`},parseForm(t){t.main.value=t.main.value===void 0?"":t.main.value,t.main=this.formValidation.createFields([t.main])[0];let e=0;for(let s in t.tabs)e===0&&(t.tabs[s].active=!0),t.tabs[s].active=t.tabs[s].active===void 0?!1:t.tabs[s].active,t.tabs[s].fields=this.formValidation.createFields(t.tabs[s].fields),t.tabs[s].subject=new Fe({}),t.tabs[s].fields.forEach(c=>{c.subject=t.tabs[s].subject}),t.tabs[s].component&&t.tabs[s].instance===void 0&&(t.tabs[s].instance={object:z(this.extraComponents()[t.tabs[s].component]),errors:[]}),e++;return t},handleFieldChange(t,e){t.errors.length===0&&t.subject.next({field:t,fields:e})},handleTabError(t){this.form.tabs[this.activeTabIdentifier].instance.errors=[],t!==!1?this.form.tabs[this.activeTabIdentifier].instance.errors.push(...t):this.form.tabs[this.activeTabIdentifier].instance.errors=[]},handleTabChange(t){this.form.tabs[this.activeTabIdentifier].fields=t}}},Ds={key:0,class:"flex items-center justify-center h-full"},Es={key:1,class:"box-header border-b border-box-edge box-border p-2 flex justify-between items-center"},Fs={class:"text-fontcolor font-bold text-lg"},Ms={class:"flex flex-col"},Os={key:0,class:"flex justify-between items-center"},js={for:"title",class:"font-bold my-2"},As={key:0},Ps={for:"title",class:"text-sm my-2"},Ls=["href"],Rs=["disabled"],Hs=["disabled"],Is={key:0,class:"text-xs text-fontcolor py-1"},Vs={key:0},Bs={key:1},Ys={class:"header flex ml-4",style:{"margin-bottom":"-1px"}},zs=["onClick"],$s={class:"ns-tab-item"},Us={class:"border p-4 rounded"},qs={key:0,class:"-mx-4 flex flex-wrap"},Ns={key:1,class:"-mx-4 flex flex-wrap"},Ws={key:1,class:"px-4 text-center"},Ks={class:"text-error-tertiary border-dashed border-error-tertiary border p-4"},Qs={key:2,class:"flex justify-end"},Gs=["disabled"];function Zs(t,e,s,c,a,l){const o=x("ns-spinner"),d=x("ns-close-button"),h=x("ns-field");return Object.values(t.form).length>0?(n(),r("div",{key:0,class:m(["form flex-auto",s.popup?"ns-box w-[95vw] md:w-[66vw] max-h-[80vh] overflow-hidden flex flex-col":""]),id:"crud-form"},[Object.values(t.form).length===0?(n(),r("div",Ds,[E(o)])):u("",!0),s.popup?(n(),r("div",Es,[i("h2",Fs,f(s.popup.params.title),1),i("div",null,[E(d,{onClick:e[0]||(e[0]=g=>l.handleClose())})])])):u("",!0),Object.values(t.form).length>0?(n(),r("div",{key:2,class:m(s.popup?"p-2 overflow-y-auto":"")},[i("div",Ms,[t.form.main?(n(),r("div",Os,[i("label",js,[t.form.main.name?(n(),r("span",As,f(t.form.main.label),1)):u("",!0)]),i("div",Ps,[t.links.list&&!s.popup?(n(),r("a",{key:0,href:t.links.list,class:"rounded-full border px-2 py-1 ns-inset-button error"},f(l.__("Go Back")),9,Ls)):u("",!0)])])):u("",!0),t.form.main.name?(n(),r(y,{key:1},[i("div",{class:m([t.form.main.disabled?"disabled":t.form.main.errors.length>0?"error":"primary","input-group flex border rounded overflow-hidden"])},[A(i("input",{"onUpdate:modelValue":e[1]||(e[1]=g=>t.form.main.value=g),onKeydown:e[2]||(e[2]=B(g=>l.submit(),["enter"])),onKeypress:e[3]||(e[3]=g=>t.formValidation.checkField(t.form.main,l.extractedForm,l.extractedFormLabels)),onBlur:e[4]||(e[4]=g=>t.formValidation.checkField(t.form.main,l.extractedForm,l.extractedFormLabels)),onChange:e[5]||(e[5]=g=>t.formValidation.checkField(t.form.main,l.extractedForm,l.extractedFormLabels)),disabled:t.form.main.disabled,type:"text",class:"flex-auto outline-hidden h-10 px-2"},null,40,Rs),[[L,t.form.main.value]]),i("button",{disabled:t.form.main.disabled,class:m([t.form.main.disabled?"disabled":t.form.main.errors.length>0?"error":"","outline-hidden px-4 h-10 text-white"]),onClick:e[6]||(e[6]=g=>l.submit())},f(l.__("Save")),11,Hs)],2),t.form.main.description&&t.form.main.errors.length===0?(n(),r("p",Is,f(t.form.main.description),1)):u("",!0),(n(!0),r(y,null,D(t.form.main.errors,(g,v)=>(n(),r("p",{key:v,class:"text-xs py-1 text-error-secondary"},[g.identifier==="required"?(n(),r("span",Vs,[k(t.$slots,"error-required",{},()=>[_(f(g.identifier),1)])])):u("",!0),g.identifier==="invalid"?(n(),r("span",Bs,[k(t.$slots,"error-invalid",{},()=>[_(f(g.message),1)])])):u("",!0)]))),128))],64)):u("",!0)]),s.disableTabs!=="true"?(n(),r("div",{key:0,id:"tabs-container",class:m([s.popup?"mt-5":"my-5","ns-tab"])},[i("div",Ys,[(n(!0),r(y,null,D(t.form.tabs,(g,v)=>(n(),r("div",{key:v,onClick:M=>l.toggle(v),class:m([g.active?"active border":"inactive border","tab rounded-tl rounded-tr border px-3 py-2 cursor-pointer"]),style:{"margin-right":"-1px"}},f(g.label),11,zs))),128))]),i("div",$s,[i("div",Us,[(l.activeTabFields&&l.activeTabFields.length)>0&&!l.activeTab.component?(n(),r("div",qs,[(n(!0),r(y,null,D(l.activeTabFields,(g,v)=>(n(),r("div",{key:`${l.activeTabIdentifier}-${v}`,class:m(s.fieldClass||"px-4 w-full md:w-1/2 lg:w-1/3")},[E(h,{onSaved:M=>l.handleSaved(M,l.activeTabIdentifier,g),onBlur:M=>t.formValidation.checkField(g,l.extractedForm,l.extractedFormLabels),onKeyup:M=>t.formValidation.checkField(g,l.extractedForm,l.extractedFormLabels)&&l.handleFieldChange(g,l.activeTabFields),field:g},null,8,["onSaved","onBlur","onKeyup","field"])],2))),128))])):u("",!0),l.activeTab&&l.activeTab.component?(n(),r("div",Ns,[l.activeTab.instance.object?(n(),r("div",{key:`${l.activeTabIdentifier}`,class:m(s.fieldClass||"px-4 w-full")},[(n(),F(se,null,[(n(),F(U(l.activeTab.instance.object),{onChanged:e[7]||(e[7]=g=>l.handleTabChange(g)),onInvalid:e[8]||(e[8]=g=>l.handleTabError(g)),tab:l.activeTab},null,40,["tab"]))],1024))],2)):(n(),r("div",Ws,[i("div",Ks,f(l.__("Failed to load the component: {component}".replace("{component}",l.activeTab.component))),1)]))])):u("",!0),t.form.main.name?u("",!0):(n(),r("div",Qs,[i("div",{class:m(["ns-button",t.form.main.disabled?"default":t.form.main.errors.length>0?"error":"info"])},[i("button",{disabled:t.form.main.disabled,onClick:e[9]||(e[9]=g=>l.submit()),class:"outline-hidden px-4 h-10 border-l"},f(l.__("Save")),9,Gs)],2)]))])])],2)):u("",!0)],2)):u("",!0)],2)):u("",!0)}const Xs=w(Ts,[["render",Zs]]),Js={data:()=>({}),mounted(){},computed:{hasError(){return this.field.errors!==void 0&&this.field.errors.length>0},disabledClass(){return this.field.disabled?"bg-input-edge cursor-not-allowed":"bg-transparent"},inputClass(){return this.disabledClass+" "+this.leadClass},leadClass(){return this.leading?"pl-8":"px-4"}},props:["placeholder","leading","type","field"]},el=["for"],tl={class:"text-fontcolor-soft mt-1 mb-2 relative overflow-hidden border rounded-md focus:shadow-sm"},sl={key:0,class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},ll={class:"sm:text-sm sm:leading-5"},il=["disabled","id","placeholder"];function nl(t,e,s,c,a,l){const o=x("ns-field-description");return n(),r("div",{class:m(["flex flex-auto flex-col mb-2 ns-date",l.hasError?"has-error":"is-pristine"])},[i("label",{for:s.field.name,class:"block leading-5 font-medium"},[k(t.$slots,"default")],8,el),i("div",tl,[s.leading?(n(),r("div",sl,[i("span",ll,f(s.leading),1)])):u("",!0),A(i("input",{disabled:s.field.disabled,"onUpdate:modelValue":e[0]||(e[0]=d=>s.field.value=d),onBlur:e[1]||(e[1]=d=>t.$emit("blur",this)),onChange:e[2]||(e[2]=d=>t.$emit("change",this)),id:s.field.name,type:"date",class:m([l.inputClass,"form-input block w-full sm:text-sm sm:leading-5 h-10"]),placeholder:s.placeholder},null,42,il),[[L,s.field.value]])]),E(o,{field:s.field},null,8,["field"])],2)}const rl=w(Js,[["render",nl]]),dl={name:"ns-date-time-picker",props:["field","date"],data(){return{visible:!1,hours:0,minutes:0,currentView:"days",currentDay:void 0,moment:S}},computed:{fieldDate(){return this.field?S(this.field.value).isValid()?S(this.field.value):S():this.date?S(this.date):S()}},mounted(){let t=S(this.field.value);t.isValid()?this.setDate(t.format("YYYY-MM-DD HH:mm:ss")):this.setDate(S(ns.date.current).format("YYYY-MM-DD HH:mm:ss"))},methods:{__:b,setDate(t){this.field.value=t}}},al={class:"picker mb-2"},ol={key:0,class:"block leading-5 font-medium text-font"},ul={class:"ns-button"},cl={key:0},fl={key:1},hl={key:0},ml={key:1},bl={key:1,class:"text-sm text-fontcolor-soft py-1"},gl={key:2,class:"relative z-10 h-0 w-0"};function vl(t,e,s,c,a,l){const o=x("ns-calendar");return n(),r("div",al,[s.field&&s.field.label&&s.field.label.length>0?(n(),r("label",ol,f(s.field.label),1)):u("",!0),i("div",ul,[i("button",{onClick:e[0]||(e[0]=d=>a.visible=!a.visible),class:m([s.field&&s.field.label&&s.field.label.length>0?"mt-1 border border-input-edge":"","shadow rounded cursor-pointer w-full p-1 flex items-center text-font"])},[e[5]||(e[5]=i("i",{class:"las la-clock text-xl"},null,-1)),s.field?(n(),r(y,{key:0},[[null,"",void 0].includes(s.field.value)?u("",!0):(n(),r("span",cl,f(l.fieldDate.format("YYYY-MM-DD HH:mm")),1)),[null,"",void 0].includes(s.field.value)?(n(),r("span",fl,"N/A")):u("",!0)],64)):u("",!0),s.date?(n(),r(y,{key:1},[[null,"",void 0].includes(s.date)?u("",!0):(n(),r("span",hl,f(l.fieldDate.format("YYYY-MM-DD HH:mm")),1)),[null,"",void 0].includes(s.date)?(n(),r("span",ml,"N/A")):u("",!0)],64)):u("",!0)],2)]),s.field?(n(),r("p",bl,f(s.field.description),1)):u("",!0),a.visible?(n(),r("div",gl,[i("div",{class:m([s.field&&s.field.label&&s.field.label.length>0?"-mt-4":"mt-2","absolute w-72 shadow-xl rounded ns-box anim-duration-300 zoom-in-entrance flex flex-col"])},[s.field?(n(),F(o,{key:0,onOnClickOut:e[1]||(e[1]=d=>a.visible=!1),onSet:e[2]||(e[2]=d=>l.setDate(d)),visible:a.visible,date:s.field.value},null,8,["visible","date"])):u("",!0),s.date?(n(),F(o,{key:1,onOnClickOut:e[3]||(e[3]=d=>a.visible=!1),onSet:e[4]||(e[4]=d=>l.setDate(d)),visible:a.visible,date:s.date},null,8,["visible","date"])):u("",!0)],2)])):u("",!0)])}const oe=w(dl,[["render",vl]]),pl={name:"ns-datepicker",components:{nsCalendar:ae},props:["label","date","format"],computed:{formattedDate(){return S(this.date).format(this.format||"YYYY-MM-DD HH:mm:ss")}},data(){return{visible:!1}},mounted(){},methods:{__:b,setDate(t){this.$emit("set",t)}}},yl={class:"picker"},_l={class:"ns-button"},xl={class:"mx-1 text-sm"},kl={key:0},wl={key:1},Cl={key:0,class:"relative h-0 w-0 -mb-2"},Sl={class:"w-72 mt-2 shadow-lg anim-duration-300 zoom-in-entrance flex flex-col ns-floating-panel"};function Tl(t,e,s,c,a,l){const o=x("ns-calendar");return n(),r("div",yl,[i("div",_l,[i("button",{onClick:e[0]||(e[0]=d=>a.visible=!a.visible),class:"rounded cursor-pointer border shadow w-full px-1 py-1 flex items-center text-font"},[e[3]||(e[3]=i("i",{class:"las la-clock text-2xl"},null,-1)),i("span",xl,[i("span",null,f(s.label||l.__("Date"))+" : ",1),s.date?(n(),r("span",kl,f(l.formattedDate),1)):(n(),r("span",wl,f(l.__("N/A")),1))])])]),a.visible?(n(),r("div",Cl,[i("div",Sl,[E(o,{visible:a.visible,onOnClickOut:e[1]||(e[1]=d=>a.visible=!1),date:s.date,onSet:e[2]||(e[2]=d=>l.setDate(d))},null,8,["visible","date"])])])):u("",!0)])}const Dl=w(pl,[["render",Tl]]),El={name:"ns-daterange-picker",data(){return{leftCalendar:S(),rightCalendar:S().add(1,"months"),rangeViewToggled:!1,clickedOnCalendar:!1}},mounted(){this.field.value||this.clearDate(),document.addEventListener("click",this.checkClickedItem)},beforeUnmount(){document.removeEventListener("click",this.checkClickedItem)},watch:{leftCalendar(){this.leftCalendar.isSame(this.rightCalendar,"month")&&this.rightCalendar.add(1,"months")},rightCalendar(){this.rightCalendar.isSame(this.leftCalendar,"month")&&this.leftCalendar.sub(1,"months")}},methods:{__:b,setDateRange(t,e){this.field.value[t]=e,S(this.field.value.startDate).isBefore(S(this.field.value.endDate))&&this.$emit("change",this.field)},getFormattedDate(t){return t!==null?S(t).format("YYYY-MM-DD HH:mm"):b("N/D")},clearDate(){this.field.value={startDate:null,endDate:null}},toggleRangeView(){this.rangeViewToggled=!this.rangeViewToggled},handleDateRangeClick(){this.clickedOnCalendar=!0},checkClickedItem(t){this.$el.getAttribute("class").split(" ").includes("ns-daterange-picker")&&(!this.$el.contains(t.srcElement)&&!this.clickedOnCalendar&&this.rangeViewToggled&&(this.$emit("blur",this.field),this.toggleRangeView()),setTimeout(()=>{this.clickedOnCalendar=!1},100))}},computed:{hasError(){return this.field.errors!==void 0&&this.field.errors.length>0},disabledClass(){return this.field.disabled?"bg-gray-200 cursor-not-allowed":"bg-transparent"},inputClass(){return this.disabledClass+" "+this.leadClass},leadClass(){return this.leading?"pl-8":"px-4"},startDateFormatted(){return this.field.value!==void 0&&S(this.field.value.startDate).isValid()?S(this.field.value.startDate).format("YYYY-MM-DD HH:mm"):!1},endDateFormatted(){return this.field.value!==void 0&&S(this.field.value.endDate).isValid()?S(this.field.value.endDate).format("YYYY-MM-DD HH:mm"):!1}},props:["placeholder","leading","type","field"]},Fl=["for"],Ml={class:"border border-input-edge rounded-tl rounded-bl flex-auto flex"},Ol={key:0,class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},jl={class:"text-fontcolor sm:text-sm sm:leading-5"},Al={class:""},Pl={class:""},Ll={key:0,class:"relative h-0 w-0"},Rl={class:"z-10 absolute md:w-[550px] w-[225px] mt-2 shadow-lg anim-duration-300 zoom-in-entrance flex flex-col"},Hl={class:"flex flex-col md:flex-row bg-box-background rounded-lg"};function Il(t,e,s,c,a,l){const o=x("ns-calendar"),d=x("ns-field-description");return n(),r("div",{onClick:e[4]||(e[4]=h=>l.handleDateRangeClick()),class:"flex flex-auto flex-col mb-2 ns-daterange-picker"},[i("label",{for:s.field.name,class:m([l.hasError?"text-error-primary":"text-font","block leading-5 font-medium"])},[k(t.$slots,"default")],10,Fl),i("div",{class:m([l.hasError?"error":"","mt-1 relative flex input-group bg-input-background rounded overflow-hidden shadow focus:shadow-sm"])},[i("div",Ml,[s.leading?(n(),r("div",Ol,[i("span",jl,f(s.leading),1)])):u("",!0),i("div",{class:"flex flex-auto p-1 text-fontcolor text-sm items-center cursor-pointer",onClick:e[0]||(e[0]=h=>l.toggleRangeView())},[e[5]||(e[5]=i("span",{class:"mr-1"},[i("i",{class:"las la-clock text-2xl"})],-1)),i("span",Al,f(l.startDateFormatted||l.__("N/A")),1),e[6]||(e[6]=i("span",{class:"mx-2"},"â€”",-1)),e[7]||(e[7]=i("span",{class:"mr-1"},[i("i",{class:"las la-clock text-2xl"})],-1)),i("span",Pl,f(l.endDateFormatted||l.__("N/A")),1)])]),i("button",{class:"px-3 outline-hidden font-bold bg-error-tertiary",onClick:e[1]||(e[1]=h=>l.clearDate())},[...e[8]||(e[8]=[i("i",{class:"las la-times"},null,-1)])])],2),a.rangeViewToggled?(n(),r("div",Ll,[i("div",Rl,[i("div",Hl,[E(o,{class:"md:w-1/2 w-full",range:[l.startDateFormatted,l.endDateFormatted],side:"left",date:s.field.value.startDate,"selected-range":s.field.value,onSet:e[2]||(e[2]=h=>l.setDateRange("startDate",h))},null,8,["range","date","selected-range"]),e[9]||(e[9]=i("div",{class:"flex-auto border-input-edge border-l border-r"},null,-1)),E(o,{class:"md:w-1/2 w-full",range:[l.startDateFormatted,l.endDateFormatted],side:"right",date:s.field.value.endDate,"selected-range":s.field.value,onSet:e[3]||(e[3]=h=>l.setDateRange("endDate",h))},null,8,["range","date","selected-range"])])])])):u("",!0),E(d,{field:s.field},null,8,["field"])])}const Vl=w(El,[["render",Il]]),Bl={mounted(){console.log(this.parent)},props:["parent"],methods:{__:b,resetDefault(){Popup.show(nsConfirmPopup,{title:b("Confirm Your Action"),message:b("This will clear all records and accounts. It's ideal if you want to start from scratch. Are you sure you want to reset default settings for accounting?"),onAction:t=>{t&&this.resetDefaultAccounting()}})},resetDefaultAccounting(){nsHttpClient.get("/api/transactions-accounts/reset-defaults").subscribe({next:t=>{C.success(t.message),this.parent.loadSettingsForm()},error:t=>{C.error(t.message)}})}}};function Yl(t,e,s,c,a,l){const o=x("ns-button");return n(),F(o,{onClick:e[0]||(e[0]=d=>l.resetDefault()),type:"warning"},{default:T(()=>[_(f(l.__("Reset Default")),1)]),_:1})}const zl=w(Bl,[["render",Yl]]),$l={name:"ns-dropzone",emits:["dropped"],mounted(){},setup(t,{emit:e}){return{dropZone:Y(null),handleDrop:a=>{const l=a.dataTransfer.getData("text");e("dropped",l)}}}};function Ul(t,e,s,c,a,l){return n(),r("div",{ref:"dropZone",class:"ns-drop-zone mb-4",onDragover:e[0]||(e[0]=re(()=>{},["prevent"]))},[k(t.$slots,"default",{},void 0,!0)],544)}const ql=w($l,[["render",Ul],["__scopeId","data-v-2d2d8b6c"]]),Nl={emits:["drag-start","drag-end"],name:"ns-draggable",props:{widget:{required:!0}},setup(t,{emit:e}){const s=Y(null),c=Y(null);Y({});let a=null,l=0,o=0,d=0,h=0;const g=O=>{if(O.target.closest(".widget-handle")===null)return;const j=O.srcElement.closest(".ns-draggable-item"),I=j.getBoundingClientRect();a=j.cloneNode(!0),a.setAttribute("class","ns-ghost"),a.style.display="none",a.style.position="fixed",a.style.top=`${I.top}px`,a.style.left=`${I.left}px`,a.style.width=`${I.width}px`,a.style.height=`${I.height}px`,j.closest(".ns-drop-zone").appendChild(a),j.style.filter="grayscale(1) opacity(0.5)",l=O.clientX-d,o=O.clientY-h,c.value={dom:j},e("drag-start",t.widget)},v=O=>{if(c.value===null)return;const P=c.value.dom.closest(".ns-drop-zone").querySelector(".ns-ghost"),j=P.querySelector("div");Array.from(j.classList).filter(R=>R.startsWith("shadow")).forEach(R=>j.classList.remove(R)),d=O.clientX-l,h=O.clientY-o,j.style.boxShadow="0px 4px 10px 5px rgb(0 0 0 / 48%)",P.style.display="block",P.style.transform=`translate(${d}px, ${h}px)`,P.classList.add("z-10"),P.classList.add("widget-grabbed"),document.querySelectorAll(".ns-drop-zone").forEach(R=>{R.getBoundingClientRect();const{left:N,top:W,right:K,bottom:Q}=R.getBoundingClientRect(),{clientX:p,clientY:X}=O;p>=N&&p<=K&&X>=W&&X<=Q?R.setAttribute("hovered","true"):R.setAttribute("hovered","false")})},M=O=>{if(c.value===null)return;const j=c.value.dom.closest(".ns-drop-zone").querySelector(".ns-ghost");j&&j.remove(),c.value=null,d=0,h=0,O.srcElement.closest(".ns-drop-zone"),e("drag-end",t.widget)};return le(()=>{s.value&&(document.addEventListener("mousemove",O=>v(O)),document.addEventListener("mouseup",O=>M(O)))}),De(()=>{document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",M)}),{draggable:s,startDrag:g}}};function Wl(t,e,s,c,a,l){return n(),r("div",{ref:"draggable",class:"ns-draggable-item",onMousedown:e[0]||(e[0]=(...o)=>c.startDrag&&c.startDrag(...o))},[k(t.$slots,"default")],544)}const Kl=w(Nl,[["render",Wl]]),Ql={name:"ns-dragzone",props:["raw-widgets","raw-columns"],components:{nsDropzone:ql,nsDraggable:Kl},data(){return{widgets:[],theme:ns.theme,dragged:null,isDragging:!1,columns:[]}},mounted(){this.widgets=this.rawWidgets.map(t=>({name:t.name,"component-name":t["component-name"],"class-name":t["class-name"],component:z(window[t["component-name"]])})),this.columns=this.rawColumns.map(t=>(t.widgets.forEach(e=>{e.component=z(window[e.identifier]),e["class-name"]=e.class_name,e["component-name"]=e.identifier}),t)),document.addEventListener("mousemove",t=>{if(this.isDragging===!1)return;document.querySelectorAll(".intermediate-dropzone").forEach((c,a)=>{const l=c.getBoundingClientRect(),{left:o,top:d,right:h,bottom:g}=l,{clientX:v,clientY:M}=t;v>=o&&v<=h&&M>=d&&M<=g?(c.setAttribute("hovered","true"),c.classList.add("slide-fade-entrance")):(c.setAttribute("hovered","false"),c.classList.remove("slide-fade-entrance"))}),document.querySelectorAll(".widget-placeholder").forEach(c=>{const a=c.getBoundingClientRect(),{left:l,top:o,right:d,bottom:h}=a,{clientX:g,clientY:v}=t;g>=l&&g<=d&&v>=o&&v<=h?c.setAttribute("hovered","true"):c.setAttribute("hovered","false")})})},computed:{hasUnusedWidgets(){const t=this.columns.map(e=>e.widgets).flat();return this.widgets.filter(e=>!t.map(c=>c["component-name"]).includes(e["component-name"])).length>0}},methods:{__:b,handleStartDragging(t){this.isDragging=!0},handleEndDragging(t){this.isDragging=!1;const e=document.querySelector('.widget-placeholder[hovered="true"]'),s=document.querySelector('.intermediate-dropzone[hovered="true"]');e?this.processAppendingToColumn(t):s?this.proceedMoveToSpecificLocation(t,s):this.processRegularWidgetSwapping(t),this.removeSpecialEffect()},removeSpecialEffect(){document.querySelectorAll(".ns-draggable-item").forEach(e=>{e.removeAttribute("style")})},proceedMoveToSpecificLocation(t,e){const s=e.getAttribute("data-index"),c=this.columns.filter(d=>d.name===t.column)[0],a=c.widgets.indexOf(t);c.widgets.splice(a,1);const l=e.closest("[column-name]").getAttribute("column-name"),o=this.columns.filter(d=>d.name===l)[0];t.position=s,t.column=o.name,o.widgets.splice(s,0,t),this.handleChange(o),this.handleChange(c),e.setAttribute("hovered","false")},processAppendingToColumn(t){const e=document.querySelector('.widget-placeholder[hovered="true"]');if(e){const s=this.columns.filter(o=>o.name===t.column)[0],c=s.widgets.indexOf(t);s.widgets.splice(c,1);const a=e.closest("[column-name]").getAttribute("column-name"),l=this.columns.filter(o=>o.name===a)[0];t.position=l.widgets.length,t.column=a,l.widgets.push(t),this.handleChange(l),this.handleChange(s)}},processRegularWidgetSwapping(t){const e=document.querySelector('.ns-drop-zone[hovered="true"]');if(e){const a=e.closest("[column-name]").getAttribute("column-name"),l=this.columns.filter(j=>j.name===a),o=l[0].widgets.filter(j=>j["component-name"]===e.querySelector(".ns-draggable-item").getAttribute("component-name")),d=document.querySelector(`[component-name="${t["component-name"]}"]`),g=d.closest("[column-name]").getAttribute("column-name"),v=this.columns.filter(j=>j.name===g),M=v[0].widgets.filter(j=>j["component-name"]===d.getAttribute("component-name"));if(e.setAttribute("hovered","false"),M[0]["component-name"]===o[0]["component-name"])return;const O=M[0].position,P=o[0].position;M[0].column=a,M[0].position=P,o[0].column=g,o[0].position=O,l[0].widgets[P]=M[0],v[0].widgets[O]=o[0],this.handleChange(l[0]),this.handleChange(v[0])}const s=document.querySelector('.widget-placeholder[hovered="true"]');if(s){const c=s.closest("[column-name]").getAttribute("column-name");if(t===c){console.log("The widget is already in the same column.");return}const a=this.columns.filter(d=>d.name===t.column)[0],l=a.widgets.indexOf(t);a.widgets.splice(l,1);const o=this.columns.filter(d=>d.name===c)[0];t.position=o.widgets.length,t.column=c,o.widgets.push(t),this.handleChange(a),this.handleChange(o)}},handleChange(t,e){setTimeout(()=>{nsHttpClient.post("/api/users/widgets",{column:t}).subscribe(s=>{},s=>C.error(s.message||b("An unpexpected error occured while using the widget.")))},100)},handleRemoveWidget(t,e){const s=e.widgets.indexOf(t);e.widgets.splice(s,1),this.handleChange(e)},async openWidgetAdded(t){try{const e=this.columns.filter(o=>o.name!==t.name?o.widgets.length>0:!1).map(o=>o.widgets).flat(),s=t.widgets.map(o=>o["component-name"]),c=this.widgets.filter(o=>{const d=e.map(h=>h["component-name"]);return d.push(...s),!d.includes(o["component-name"])}).map(o=>({value:o,label:o.name})),a=await new Promise((o,d)=>{const h=c.filter(g=>s.includes(g["component-name"]));Popup.show(be,{value:h,resolve:o,reject:d,type:"multiselect",options:c,label:b("Choose Widget"),description:b("Select with widget you want to add to the column.")})}),l=this.columns.indexOf(t);this.columns[l].widgets=[...this.columns[l].widgets,...a].map((o,d)=>(o.position=d,o.column=t.name,o)),this.handleChange(this.columns[l])}catch(e){console.log(e)}}}},Gl={class:"flex md:-mx-2 flex-wrap"},Zl=["column-name"],Xl=["data-index"],Jl=["onClick"],ei={class:"text-sm text-font",type:"info"},ti={key:1,class:"widget-placeholder cursor-pointer border-2 border-dashed h-16 flex items-center justify-center"},si={class:"text-sm text-font",type:"info"};function li(t,e,s,c,a,l){const o=x("ns-draggable"),d=x("ns-dropzone");return n(),r("div",Gl,[(n(!0),r(y,null,D(a.columns,(h,g)=>(n(),r("div",{class:"w-full md:px-2 md:w-1/2 lg:w-1/3 xl:1/4","column-name":h.name,key:h.name},[(n(!0),r(y,null,D(h.widgets,(v,M)=>(n(),r(y,null,[i("div",{"data-index":M,class:"intermediate-dropzone anim-duration-500"},[...e[2]||(e[2]=[i("div",null,null,-1)])],8,Xl),E(d,null,{default:T(()=>[E(o,{"component-name":v["component-name"],onDragStart:e[0]||(e[0]=O=>l.handleStartDragging(O)),onDragEnd:e[1]||(e[1]=O=>l.handleEndDragging(O)),widget:v},{default:T(()=>[(n(),F(U(v.component),{onOnRemove:O=>l.handleRemoveWidget(v,h),widget:v},null,40,["onOnRemove","widget"]))]),_:2},1032,["component-name","widget"])]),_:2},1024)],64))),256)),l.hasUnusedWidgets?(n(),r("div",{key:0,onClick:v=>l.openWidgetAdded(h),class:"widget-placeholder cursor-pointer border-2 border-dashed h-16 flex items-center justify-center"},[i("span",ei,f(l.__("Drop widget / click to add")),1)],8,Jl)):u("",!0),a.isDragging&&!l.hasUnusedWidgets?(n(),r("div",ti,[i("span",si,f(l.__("Drop the widget here")),1)])):u("",!0)],8,Zl))),128))])}const ii=w(Ql,[["render",li]]),ni={data:()=>({sizeMapping:{52:"w-52",64:"w-64",72:"w-72",80:"w-80",96:"w-96",128:"w-128",144:"w-144",160:"w-160"}}),name:"ns-switch",emits:["change","blur"],mounted(){},computed:{_options(){return this.field.options.map(t=>(t.selected=t.value===this.field.value,t))},hasError(){return this.field.errors!==void 0&&this.field.errors.length>0},disabledClass(){return this.field.disabled?"ns-disabled cursor-not-allowed":""},sizeClass(){return` w-1/${this._options.length<=4?this._options.length:4}`},inputClass(){return this.disabledClass+" "+this.leadClass},leadClass(){return this.leading?"pl-8":"px-4"}},methods:{__:b,setSelected(t){this.field.value=t.value,this._options.forEach(e=>e.selected=!1),t.selected=!0,this.$forceUpdate(),this.$emit("change",t.value)}},props:["placeholder","leading","type","field","size"]},ri=["for"],di=["disabled","onClick"],ai={key:1,class:"text-xs ns-description"};function oi(t,e,s,c,a,l){return n(),r("div",{class:m(["ns-switch",(l.hasError?"has-error":"is-pristine")+" "+(s.field.label?"mb-2":"")])},[s.field.label?(n(),r("label",{key:0,for:s.field.name,class:"block leading-5 font-medium"},[k(t.$slots,"default")],8,ri)):u("",!0),i("div",{class:m([t.sizeMapping[s.size]||"w-52","rounded-lg flex overflow-hidden shadow my-1"])},[(n(!0),r(y,null,D(l._options,(o,d)=>(n(),r("button",{disabled:o.disabled,key:d,onClick:h=>l.setSelected(o),class:m([o.selected?"selected "+l.sizeClass:"unselected "+l.inputClass+" "+l.sizeClass,"p-2 text-sm flex-no-wrap outline-hidden rounded-none"])},f(o.label),11,di))),128))],2),!s.field.errors||s.field.errors.length===0?(n(),r("p",ai,[k(t.$slots,"description")])):u("",!0),(n(!0),r(y,null,D(s.field.errors,(o,d)=>(n(),r("p",{key:d,class:"text-xs ns-error"},[o.identifier==="required"?k(t.$slots,o.identifier,{key:0},()=>[_(f(l.__("This field is required.")),1)]):u("",!0)]))),128))],2)}const ue=w(ni,[["render",oi]]),ui={data(){return{isRevealed:!1,isFocused:!1,isEditing:!1}},computed:{hasError(){return this.field.errors&&this.field.errors.length>0},disabledClass(){return this.field.disabled?"ns-disabled cursor-not-allowed":""},inputClass(){return this.disabledClass+" "+this.leadClass},leadClass(){return this.leading?"pl-8":"px-4"},inputType(){return this.isRevealed?"text":"password"},inputValue(){return this.isEditing||this.isRevealed?this.field.value||"":this.maskValue(this.field.value)}},methods:{toggleReveal(){this.isRevealed=!this.isRevealed},onFocus(){this.isFocused=!0},onBlur(){this.isFocused=!1,this.isEditing=!1},onInput(t){this.isEditing=!0,this.field.value=t.target.value,this.$emit("change",this.field)},maskValue(t){if(!t)return"";const e=String(t);if(e.length===0)return"";if(e.length<=6)return"*".repeat(e.length);const s=e.substring(0,2),c=e.substring(e.length-4),a="*".repeat(e.length-6);return s+a+c}},props:["placeholder","leading","type","field"]},ci=["for"],fi={key:0,class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},hi={class:"leading sm:text-sm sm:leading-5"},mi=["disabled","value","id","type","placeholder"],bi=["title"],gi={key:0,class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},vi={key:1,class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"};function pi(t,e,s,c,a,l){const o=x("ns-field-description");return n(),r("div",{class:m(["flex flex-col mb-2 flex-auto ns-input",l.hasError?"has-error":"is-pristine"])},[s.field.label&&s.field.label.length>0?(n(),r("label",{key:0,for:s.field.name,class:"block leading-5 font-medium"},[k(t.$slots,"default")],8,ci)):u("",!0),i("div",{class:m([s.field.description||s.field.errors&&s.field.errors.length>0?"mb-2":"","mt-1 relative overflow-hidden border rounded-md focus:shadow-sm"])},[s.leading?(n(),r("div",fi,[i("span",hi,f(s.leading),1)])):u("",!0),i("input",{ref:"inputRef",disabled:s.field.disabled,value:l.inputValue,onInput:e[0]||(e[0]=(...d)=>l.onInput&&l.onInput(...d)),onFocus:e[1]||(e[1]=(...d)=>l.onFocus&&l.onFocus(...d)),onBlur:e[2]||(e[2]=(...d)=>l.onBlur&&l.onBlur(...d)),id:s.field.name,type:l.inputType,class:m([l.inputClass,"block w-full sm:text-sm sm:leading-5 h-10 pr-10"]),placeholder:s.field.placeholder||""},null,42,mi),s.field.value&&String(s.field.value).length>0?(n(),r("button",{key:1,type:"button",onClick:e[3]||(e[3]=(...d)=>l.toggleReveal&&l.toggleReveal(...d)),class:"absolute inset-y-0 right-0 pr-3 flex items-center cursor-pointer hover:text-blue-500",title:a.isRevealed?"éšè—":"æ˜¾ç¤º"},[a.isRevealed?(n(),r("svg",gi,[...e[4]||(e[4]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])])):(n(),r("svg",vi,[...e[5]||(e[5]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])]))],8,bi)):u("",!0)],2),E(o,{field:s.field},null,8,["field"])],2)}const ce=w(ui,[["render",pi]]),yi={data(){return{isRevealed:!1,isFocused:!1,isEditing:!1}},computed:{hasError(){return this.field.errors&&this.field.errors.length>0},disabledClass(){return this.field.disabled?"ns-disabled cursor-not-allowed":""},inputClass(){return this.disabledClass+" px-4 py-2"},inputValue(){return this.isEditing||this.isRevealed?this.field.value||"":this.maskValue(this.field.value)}},methods:{toggleReveal(){this.isRevealed=!this.isRevealed},onFocus(){this.isFocused=!0},onBlur(){this.isFocused=!1,this.isEditing=!1},onInput(t){this.isEditing=!0,this.field.value=t.target.value,this.$emit("change",this.field)},maskValue(t){if(!t)return"";const e=String(t);if(e.length===0)return"";const s=e.split(`
`);if(s.length>1){const c=s[0];return this.maskSingleLine(c)+`
...[+`+(s.length-1)+" more lines]..."}return this.maskSingleLine(e)},maskSingleLine(t){const e=String(t);if(e.length<=6)return"*".repeat(e.length);const s=e.substring(0,2),c=e.substring(e.length-4),a="*".repeat(e.length-6);return s+a+c}},props:["placeholder","leading","type","field"]},_i=["for"],xi={class:"relative"},ki=["disabled","value","id","placeholder"],wi=["title"],Ci={key:0,class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Si={key:1,class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"};function Ti(t,e,s,c,a,l){const o=x("ns-field-description");return n(),r("div",{class:m(["flex flex-col mb-2 flex-auto ns-input",l.hasError?"has-error":"is-pristine"])},[s.field.label&&s.field.label.length>0?(n(),r("label",{key:0,for:s.field.name,class:"block leading-5 font-medium"},[k(t.$slots,"default")],8,_i)):u("",!0),i("div",{class:m([s.field.description||s.field.errors&&s.field.errors.length>0?"mb-2":"","mt-1 relative overflow-hidden border rounded-md focus:shadow-sm"])},[i("div",xi,[i("textarea",{ref:"textareaRef",disabled:s.field.disabled,value:l.inputValue,onInput:e[0]||(e[0]=(...d)=>l.onInput&&l.onInput(...d)),onFocus:e[1]||(e[1]=(...d)=>l.onFocus&&l.onFocus(...d)),onBlur:e[2]||(e[2]=(...d)=>l.onBlur&&l.onBlur(...d)),id:s.field.name,class:m([l.inputClass,"block w-full sm:text-sm sm:leading-5 min-h-[100px] pr-10"]),placeholder:s.field.placeholder||"",rows:"4"},null,42,ki),s.field.value&&String(s.field.value).length>0?(n(),r("button",{key:0,type:"button",onClick:e[3]||(e[3]=(...d)=>l.toggleReveal&&l.toggleReveal(...d)),class:"absolute top-2 right-2 p-1 bg-white border rounded hover:bg-gray-50 cursor-pointer",title:a.isRevealed?"éšè—":"æ˜¾ç¤º"},[a.isRevealed?(n(),r("svg",Ci,[...e[4]||(e[4]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])])):(n(),r("svg",Si,[...e[5]||(e[5]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])]))],8,wi)):u("",!0)])],2),E(o,{field:s.field},null,8,["field"])],2)}const fe=w(yi,[["render",Ti]]),Di={emits:["blur","change","saved","keypress","keyup"],inheritAttrs:!1,data:()=>({formSubjectSubscription:null}),mounted(){},components:{nsDateTimePicker:oe,nsSwitch:ue,nsMaskedInput:ce,nsMaskedTextarea:fe},computed:{isInputField(){return["text","password","email","number","tel"].includes(this.field.type)},isHiddenField(){return["hidden"].includes(this.field.type)},isDateField(){return["date"].includes(this.field.type)},isSelectField(){return["select"].includes(this.field.type)},isSearchField(){return["search-select"].includes(this.field.type)},isTextarea(){return["textarea"].includes(this.field.type)},isMaskedText(){return["masked-text"].includes(this.field.type)},isMaskedTextarea(){return["masked-textarea"].includes(this.field.type)},isCheckbox(){return["checkbox"].includes(this.field.type)},isMultiselect(){return["multiselect"].includes(this.field.type)},isInlineMultiselect(){return["inline-multiselect"].includes(this.field.type)},isSelectAudio(){return["select-audio"].includes(this.field.type)},isSwitch(){return["switch"].includes(this.field.type)},isMedia(){return["media"].includes(this.field.type)},isCkEditor(){return["ckeditor"].includes(this.field.type)},isDateTimePicker(){return["datetimepicker"].includes(this.field.type)},isDateRangePicker(){return["daterangepicker"].includes(this.field.type)},isCustom(){return["custom"].includes(this.field.type)}},props:["field","siblings"],methods:{handleSaved(t,e){this.$emit("saved",e)},addOption(t){this.field.type==="select"&&this.field.options.forEach(s=>s.selected=!1),t.selected=!0;const e=this.field.options.indexOf(t);this.field.options.splice(e,1),this.field.options.unshift(t),this.refreshMultiselect(),this.$emit("change",{action:"addOption",option:t})},changeTouchedState(t,e){e&&e.stopPropagation&&e.stopPropagation(),t.touched=!0,this.$emit("change",t)},refreshMultiselect(){this.field.value=this.field.options.filter(t=>t.selected).map(t=>t.value)},removeOption(t){t.selected=!1,this.refreshMultiselect(),this.$emit("change",{action:"removeOption",option:t})},loadComponent(t){if(nsExtraComponents[t])return z(nsExtraComponents[t]).value;if(nsComponents[t])return z(nsComponents[t]).value;throw`Component ${t} not found.`}}},Ei=["name","value"],Fi=["innerHTML"],Mi=["innerHTML"],Oi=["innerHTML"],ji=["innerHTML"],Ai=["innerHTML"],Pi=["innerHTML"],Li=["innerHTML"],Ri=["innerHTML"],Hi=["innerHTML"],Ii=["innerHTML"],Vi=["innerHTML"],Bi=["innerHTML"],Yi=["innerHTML"],zi=["innerHTML"],$i=["innerHTML"],Ui=["innerHTML"];function qi(t,e,s,c,a,l){const o=x("ns-input"),d=x("ns-date"),h=x("ns-media-input"),g=x("ns-select"),v=x("ns-search-select"),M=x("ns-daterange-picker"),O=x("ns-date-time-picker"),P=x("ns-select-audio"),j=x("ns-textarea"),I=x("ns-masked-input"),q=x("ns-masked-textarea"),R=x("ns-checkbox"),N=x("ns-inline-multiselect"),W=x("ns-multiselect"),K=x("ns-ckeditor"),Q=x("ns-switch");return n(),r(y,null,[l.isHiddenField?(n(),r("input",J({key:0,type:"hidden",name:s.field.name,value:s.field.value},t.$attrs),null,16,Ei)):u("",!0),l.isHiddenField?u("",!0):(n(),r("div",J({key:1,class:["flex flex-auto",s.field.label?"mb-2":""]},t.$attrs),[l.isInputField?(n(),F(o,{key:0,onKeyup:e[0]||(e[0]=p=>t.$emit("keyup",p)),onKeypress:e[1]||(e[1]=p=>l.changeTouchedState(s.field,p)),onChange:e[2]||(e[2]=p=>l.changeTouchedState(s.field,p)),field:s.field},{default:T(()=>[_(f(s.field.label),1)]),description:T(()=>[i("span",{innerHTML:s.field.description||""},null,8,Fi)]),_:1},8,["field"])):u("",!0),l.isDateField?(n(),F(d,{key:1,onBlur:e[3]||(e[3]=p=>t.$emit("blur",s.field)),onChange:e[4]||(e[4]=p=>l.changeTouchedState(s.field,p)),field:s.field},{default:T(()=>[_(f(s.field.label),1)]),description:T(()=>[i("span",{innerHTML:s.field.description||""},null,8,Mi)]),_:1},8,["field"])):u("",!0),l.isMedia?(n(),F(h,{key:2,onBlur:e[5]||(e[5]=p=>t.$emit("blur",s.field)),onChange:e[6]||(e[6]=p=>l.changeTouchedState(s.field,p)),field:s.field},{default:T(()=>[_(f(s.field.label),1)]),description:T(()=>[i("span",{innerHTML:s.field.description||""},null,8,Oi)]),_:1},8,["field"])):u("",!0),l.isSelectField?(n(),F(g,{key:3,onChange:e[7]||(e[7]=p=>l.changeTouchedState(s.field,p)),field:s.field},{default:T(()=>[_(f(s.field.label),1)]),description:T(()=>[i("span",{innerHTML:s.field.description||""},null,8,ji)]),_:1},8,["field"])):u("",!0),l.isSearchField?(n(),F(v,{key:4,field:s.field,onSaved:e[8]||(e[8]=p=>l.handleSaved(s.field,p)),onChange:e[9]||(e[9]=p=>l.changeTouchedState(s.field,p))},{default:T(()=>[_(f(s.field.label),1)]),description:T(()=>[i("span",{innerHTML:s.field.description||""},null,8,Ai)]),_:1},8,["field"])):u("",!0),l.isDateRangePicker?(n(),F(M,{key:5,onBlur:e[10]||(e[10]=p=>t.$emit("blur",s.field)),onChange:e[11]||(e[11]=p=>l.changeTouchedState(s.field,p)),field:s.field},{default:T(()=>[_(f(s.field.label),1)]),description:T(()=>[i("span",{innerHTML:s.field.description||""},null,8,Pi)]),_:1},8,["field"])):u("",!0),l.isDateTimePicker?(n(),F(O,{key:6,onBlur:e[12]||(e[12]=p=>t.$emit("blur",s.field)),onChange:e[13]||(e[13]=p=>l.changeTouchedState(s.field,p)),field:s.field},{default:T(()=>[_(f(s.field.label),1)]),description:T(()=>[i("span",{innerHTML:s.field.description||""},null,8,Li)]),_:1},8,["field"])):u("",!0),l.isSelectAudio?(n(),F(P,{key:7,onBlur:e[14]||(e[14]=p=>t.$emit("blur",s.field)),onChange:e[15]||(e[15]=p=>l.changeTouchedState(s.field,p)),field:s.field},{default:T(()=>[_(f(s.field.label),1)]),description:T(()=>[i("span",{innerHTML:s.field.description||""},null,8,Ri)]),_:1},8,["field"])):u("",!0),l.isTextarea?(n(),F(j,{key:8,onBlur:e[16]||(e[16]=p=>t.$emit("blur",s.field)),onChange:e[17]||(e[17]=p=>l.changeTouchedState(s.field,p)),field:s.field},{description:T(()=>[i("span",{innerHTML:s.field.description||""},null,8,Hi)]),default:T(()=>[i("template",null,[_(f(s.field.label),1)])]),_:1},8,["field"])):u("",!0),l.isMaskedText?(n(),F(I,{key:9,onBlur:e[18]||(e[18]=p=>t.$emit("blur",s.field)),onChange:e[19]||(e[19]=p=>l.changeTouchedState(s.field,p)),field:s.field},{description:T(()=>[i("span",{innerHTML:s.field.description||""},null,8,Ii)]),default:T(()=>[i("template",null,[_(f(s.field.label),1)])]),_:1},8,["field"])):u("",!0),l.isMaskedTextarea?(n(),F(q,{key:10,onBlur:e[20]||(e[20]=p=>t.$emit("blur",s.field)),onChange:e[21]||(e[21]=p=>l.changeTouchedState(s.field,p)),field:s.field},{description:T(()=>[i("span",{innerHTML:s.field.description||""},null,8,Vi)]),default:T(()=>[i("template",null,[_(f(s.field.label),1)])]),_:1},8,["field"])):u("",!0),l.isCheckbox?(n(),F(R,{key:11,onBlur:e[22]||(e[22]=p=>t.$emit("blur",s.field)),onChange:e[23]||(e[23]=p=>l.changeTouchedState(s.field,p)),field:s.field},{default:T(()=>[_(f(s.field.label),1)]),description:T(()=>[i("span",{innerHTML:s.field.description||""},null,8,Bi)]),_:1},8,["field"])):u("",!0),l.isInlineMultiselect?(n(),F(N,{key:12,onBlur:e[24]||(e[24]=p=>t.$emit("blur",s.field)),onUpdate:e[25]||(e[25]=p=>l.changeTouchedState(s.field,p)),field:s.field},{default:T(()=>[_(f(s.field.label),1)]),description:T(()=>[i("span",{innerHTML:s.field.description||""},null,8,Yi)]),_:1},8,["field"])):u("",!0),l.isMultiselect?(n(),F(W,{key:13,onAddOption:e[26]||(e[26]=p=>l.addOption(p)),onRemoveOption:e[27]||(e[27]=p=>l.removeOption(p)),field:s.field},{default:T(()=>[_(f(s.field.label),1)]),description:T(()=>[i("span",{innerHTML:s.field.description||""},null,8,zi)]),_:1},8,["field"])):u("",!0),l.isCkEditor?(n(),F(K,{key:14,field:s.field},{default:T(()=>[_(f(s.field.label),1)]),description:T(()=>[i("span",{innerHTML:s.field.description||""},null,8,$i)]),_:1},8,["field"])):u("",!0),l.isSwitch?(n(),F(Q,{key:15,field:s.field,onChange:e[28]||(e[28]=p=>l.changeTouchedState(s.field,p))},{default:T(()=>[_(f(s.field.label),1)]),description:T(()=>[i("span",{innerHTML:s.field.description||""},null,8,Ui)]),_:1},8,["field"])):u("",!0),l.isCustom?(n(),F(se,{key:16},[(n(),F(U(l.loadComponent(s.field.component)),{field:s.field,onBlur:e[29]||(e[29]=p=>t.$emit("blur",s.field)),onChange:e[30]||(e[30]=p=>l.changeTouchedState(s.field,p))},null,40,["field"]))],1024)):u("",!0)],16))],64)}const Ni=w(Di,[["render",qi]]),Wi={name:"ns-field-detail",props:["field"],data(){return{validation:new G}},methods:{__:b}},Ki={key:0,class:"text-xs ns-description"},Qi={key:0,class:"text-xs ns-error"};function Gi(t,e,s,c,a,l){return!s.field.errors||s.field.errors.length===0?(n(),r("p",Ki,f(s.field.description),1)):(n(!0),r(y,{key:1},D(s.field.errors,(o,d)=>(n(),r("p",{key:d,class:"text-xs ns-error"},[s.field.custom_errors?(n(),r(y,{key:0},[s.field.custom_errors[o.identifier]?(n(),r("p",Qi,f(s.field.custom_errors[o.identifier]),1)):u("",!0)],64)):(n(),r(y,{key:1},[o.identifier==="required"?k(t.$slots,o.identifier,{key:0},()=>[_(f(l.__("This field is required.")),1)]):u("",!0),o.identifier==="email"?k(t.$slots,o.identifier,{key:1},()=>[_(f(l.__("This field must contain a valid email address.")),1)]):u("",!0),o.identifier==="invalid"?k(t.$slots,o.identifier,{key:2},()=>[_(f(o.message),1)]):u("",!0),o.identifier==="same"?k(t.$slots,o.identifier,{key:3},()=>[_(f(l.__('This field must be similar to "{other}"').replace("{other}",this.validation.getValueByDotNotation(o.labels,o.rule.value))),1)]):u("",!0),o.identifier==="min"?k(t.$slots,o.identifier,{key:4},()=>[_(f(l.__('This field must have at least "{length}" characters').replace("{length}",o.rule.value)),1)]):u("",!0),o.identifier==="max"?k(t.$slots,o.identifier,{key:5},()=>[_(f(l.__('This field must have at most "{length}" characters').replace("{length}",o.rule.value)),1)]):u("",!0),o.identifier==="different"?k(t.$slots,o.identifier,{key:6},()=>[_(f(l.__('This field must be different from "{other}"').replace("{other}",this.validation.getValueByDotNotation(o.labels,o.rule.value))),1)]):u("",!0),o.identifier==="regex"?k(t.$slots,o.identifier,{key:7},()=>[_(f(l.__('This field must match the pattern "{pattern}"').replace("{pattern}",o.rule.value)),1)]):u("",!0),e[0]||(e[0]=_("Ã§Ã  ",-1))],64))]))),128))}const Zi=w(Wi,[["render",Gi]]),Xi={props:["className","buttonClass","type"]};function Ji(t,e,s,c,a,l){return n(),r("button",{class:m([s.type?s.type:s.buttonClass,"ns-inset-button rounded-full h-6 min-w-[1.5rem] border border-input-edge items-center justify-center"])},[i("i",{class:m([s.className,"las"])},null,2)],2)}const en=w(Xi,[["render",Ji]]),tn={name:"ns-input-label",props:["field"],data(){return{tags:[],searchField:"",focused:!1,optionsToKeyValue:{}}},methods:{addOption(t){let e;this.optionSuggestions.length===1&&t===void 0?e=this.optionSuggestions[0]:t!==void 0&&(e=t),e!==void 0&&(this.field.value.filter(c=>c===e.value).length>0||(this.searchField="",this.field.value.push(e.value),this.$emit("change",this.field)))},removeOption(t){const e=this.field.value.filter(s=>s!==t);this.field.value=e}},mounted(){if(this.$refs.searchField.addEventListener("focus",t=>{this.focused=!0}),this.$refs.searchField.addEventListener("blur",t=>{setTimeout(()=>{this.focused=!1},200)}),this.field.value.length===void 0)try{this.field.value=JSON.parse(this.field.value)}catch{this.field.value=[]}this.field.options.forEach(t=>{this.optionsToKeyValue[t.value]=t.label})},computed:{hasError(){return this.field.errors!==void 0&&this.field.errors.length>0},optionSuggestions(){if(typeof this.field.value.map=="function"){const t=this.field.value.map(e=>e.value);return this.field.options.filter(e=>!t.includes(e.value)&&this.focused>0&&(e.label.search(this.searchField)>-1||e.value.search(this.searchField)>-1))}return[]},disabledClass(){return this.field.disabled?"ns-disabled cursor-not-allowed":""},inputClass(){return this.disabledClass+" "+this.leadClass},leadClass(){return this.leading?"pl-8":""}},props:["placeholder","leading","type","field"]},sn=["for"],ln={key:0,class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},nn={class:"leading sm:text-sm sm:leading-5"},rn=["disabled","id","type","placeholder"],dn={class:"selected-option"},an={class:"flex items-center justify-center text-font"},on={class:"flex items-center justify-center px-1"},un=["onClick"],cn={class:"relative"},fn=["placeholder"],hn={class:"h-0 absolute w-full z-10"},mn={class:"shadow menu absoluve bottom-0 w-full max-h-80 overflow-y-auto"},bn=["onClick"];function gn(t,e,s,c,a,l){const o=x("ns-field-description");return n(),r("div",{class:m(["flex flex-col mb-2 flex-auto ns-inline-multiselect",l.hasError?"has-error":"is-pristine"])},[s.field.label&&s.field.label.length>0?(n(),r("label",{key:0,for:s.field.name,class:"block leading-5 font-medium"},[k(t.$slots,"default")],8,sn)):u("",!0),i("div",{class:m([s.field.description||s.field.errors>0?"mb-2":"","mt-1 relative rounded-md focus:shadow-sm"])},[s.leading?(n(),r("div",ln,[i("span",nn,f(s.leading),1)])):u("",!0),i("div",{disabled:s.field.disabled,id:s.field.name,type:s.field.type,class:m([l.inputClass,"flex sm:text-sm sm:leading-5 p-1 flex-wrap"]),placeholder:s.field.placeholder||""},[(n(!0),r(y,null,D(s.field.value,d=>(n(),r("div",dn,[i("div",an,f(a.optionsToKeyValue[d]),1),i("div",on,[i("div",{onClick:h=>l.removeOption(d),class:"cursor-pointer rounded-full h-5 w-5 flex items-center justify-center"},[...e[3]||(e[3]=[i("i",{class:"las la-times-circle"},null,-1)])],8,un)])]))),256)),i("div",cn,[A(i("input",{onChange:e[0]||(e[0]=d=>d.stopPropagation()),onKeydown:e[1]||(e[1]=B(d=>l.addOption(),["enter"])),ref:"searchField","onUpdate:modelValue":e[2]||(e[2]=d=>a.searchField=d),type:"text",class:"w-auto p-2 border-b border-dashed bg-transparent",placeholder:s.field.placeholder||"Start searching here..."},null,40,fn),[[L,a.searchField]]),i("div",hn,[i("div",mn,[i("ul",null,[(n(!0),r(y,null,D(l.optionSuggestions,d=>(n(),r("li",{onClick:h=>l.addOption(d),class:"p-2 hover:bg-box-elevation-hover text-fontcolor cursor-pointer"},f(d.label),9,bn))),256))])])])])],10,rn)],2),E(o,{field:s.field},null,8,["field"])],2)}const vn=w(tn,[["render",gn]]),pn={data:()=>({}),mounted(){},computed:{hasError(){return this.field.errors!==void 0&&this.field.errors.length>0},disabledClass(){return this.field.disabled?"ns-disabled cursor-not-allowed":""},inputClass(){return this.disabledClass+" "+this.leadClass},leadClass(){return this.leading?"pl-8":"px-4"}},props:["placeholder","leading","type","field"]},yn=["for"],_n={key:0,class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},xn={class:"leading sm:text-sm sm:leading-5"},kn={key:1,class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},wn={class:"prefix sm:text-sm sm:leading-5"},Cn=["disabled","id","type","placeholder"],Sn={key:2,class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},Tn={class:"suffix sm:text-sm sm:leading-5"};function Dn(t,e,s,c,a,l){const o=x("ns-field-description");return n(),r("div",{class:m(["flex flex-col mb-2 flex-auto ns-input",l.hasError?"has-error":"is-pristine"])},[s.field.label&&s.field.label.length>0?(n(),r("label",{key:0,for:s.field.name,class:"block leading-5 font-medium"},[k(t.$slots,"default")],8,yn)):u("",!0),i("div",{class:m([s.field.description||s.field.errors>0?"mb-2":"","mt-1 relative overflow-hidden border rounded-md focus:shadow-sm"])},[s.leading?(n(),r("div",_n,[i("span",xn,f(s.leading),1)])):u("",!0),s.field.prefix?(n(),r("div",kn,[i("span",wn,f(s.field.prefix),1)])):u("",!0),A(i("input",{disabled:s.field.disabled,"onUpdate:modelValue":e[0]||(e[0]=d=>s.field.value=d),id:s.field.name,type:s.type||s.field.type||"text",class:m([l.inputClass,"block w-full sm:text-sm sm:leading-5 h-10"]),placeholder:s.field.placeholder||""},null,10,Cn),[[de,s.field.value]]),s.field.suffix?(n(),r("div",Sn,[i("span",Tn,f(s.field.suffix),1)])):u("",!0)],2),E(o,{field:s.field},null,8,["field"])],2)}const En=w(pn,[["render",Dn]]),Fn={name:"ns-linked-product-selector",props:{field:{type:Object,required:!0}},data:()=>({searchQuery:"",showResults:!1,searchResults:[],selectedProduct:null,isLoading:!1}),computed:{disabled(){return this.field.disabled||!1},inputValue(){return this.field.value||""},placeholder(){return this.field.placeholder||b("Search product name or barcode...")},isBaseUnit(){return this.field.unit&&this.field.unit.base_unit?this.field.unit.base_unit===1||this.field.unit.base_unit===!0:!1}},watch:{inputValue:{immediate:!0,handler(t){t&&!this.selectedProduct&&!this.isBaseUnit?this.loadSelectedProduct(t):t||(this.selectedProduct=null)}}},mounted(){!this.selectedProduct&&!this.disabled&&!this.isBaseUnit&&this.$refs.searchInputRef&&this.$refs.searchInputRef.focus(),this._clickHandler=t=>{this.$el&&!this.$el.contains(t.target)&&(this.showResults=!1)},document.addEventListener("click",this._clickHandler)},beforeUnmount(){this._clickHandler&&document.removeEventListener("click",this._clickHandler)},methods:{__:b,performSearch(){if(this.searchQuery.length<2){C.error(b("Please enter at least 2 characters"));return}this.isLoading||(this.isLoading=!0,H.post("/api/products/search",{search:this.searchQuery,limit:10}).subscribe({next:t=>{this.searchResults=Array.isArray(t)?t:[],this.showResults=this.searchResults.length>0,this.searchResults.length===0&&C.info(b("No products found"))},error:t=>{console.error(t),C.error(b("An error occurred while searching"))},complete:()=>{this.isLoading=!1}}))},selectProduct(t){this.selectedProduct=t,this.searchQuery="",this.searchResults=[],this.showResults=!1,this.field&&(this.field.value=t.id),this.$emit("change",t.id)},clearSelection(){this.selectedProduct=null,this.field&&(this.field.value=""),this.$emit("change","")},loadSelectedProduct(t){H.get(`/api/products/${t}`).subscribe({next:e=>{e&&e.id&&(this.selectedProduct=e)},error:e=>{console.error("[LinkedProductSelector] Failed to load product:",e)}})}}},Mn={class:"flex flex-col flex-auto ns-linked-product-selector"},On=["for"],jn={class:"mb-2 text-info-primary text-xs bg-info-tertiary p-2 rounded mt-1"},An={key:0,class:"border rounded p-3 bg-gray-100 text-gray-500 text-sm"},Pn={key:1,class:"relative"},Ln={class:"border rounded-md focus:shadow-sm flex"},Rn=["placeholder","disabled"],Hn={class:"text-xs text-gray-500 mt-1"},In={key:2,class:"border rounded p-3 bg-info-secondary/10"},Vn={class:"flex justify-between items-start"},Bn={class:"flex-1"},Yn={class:"font-medium text-sm"},zn={class:"text-xs text-gray-600 mt-1"},$n={key:3,class:"border-t mt-2 pt-2"},Un={class:"max-h-60 overflow-y-auto"},qn=["onClick"],Nn={class:"text-sm font-medium"},Wn={class:"text-xs text-gray-500"},Kn=["name","value"];function Qn(t,e,s,c,a,l){const o=x("ns-field-description");return n(),r("div",Mn,[i("label",{for:s.field.name,class:"block leading-5 font-medium"},[k(t.$slots,"default")],8,On),i("div",jn,[e[4]||(e[4]=i("i",{class:"las la-info-circle"},null,-1)),_(" "+f(l.__("This feature is designed for non-base units (e.g., Box â†’ Bag). Base units should not be linked.")),1)]),l.isBaseUnit?(n(),r("div",An,[e[5]||(e[5]=i("i",{class:"las la-lock"},null,-1)),_(" "+f(l.__("This is a base unit and cannot be linked to another product.")),1)])):u("",!0),!t.selectedProduct&&!l.isBaseUnit?(n(),r("div",Pn,[i("div",Ln,[A(i("input",{ref:"searchInputRef","onUpdate:modelValue":e[0]||(e[0]=d=>t.searchQuery=d),onKeyup:e[1]||(e[1]=B((...d)=>l.performSearch&&l.performSearch(...d),["enter"])),type:"text",class:m(["form-input block w-full sm:text-sm sm:leading-5 h-10",l.disabled?"ns-disabled cursor-not-allowed":""]),placeholder:l.placeholder,disabled:l.disabled},null,42,Rn),[[L,t.searchQuery]]),l.disabled?u("",!0):(n(),r("button",{key:0,onClick:e[2]||(e[2]=(...d)=>l.performSearch&&l.performSearch(...d)),type:"button",class:"w-10 h-10 flex items-center justify-center border-l outline-hidden hover:bg-info-primary"},[...e[6]||(e[6]=[i("i",{class:"las la-search"},null,-1)])]))]),i("div",Hn,[e[7]||(e[7]=i("i",{class:"las la-barcode"},null,-1)),_(" "+f(l.__("You can also scan a barcode")),1)])])):u("",!0),t.selectedProduct?(n(),r("div",In,[i("div",Vn,[i("div",Bn,[i("div",Yn,f(t.selectedProduct.name),1),i("div",zn,f(l.__("Barcode"))+": "+f(t.selectedProduct.barcode||t.selectedProduct.sku||"N/A"),1)]),l.disabled?u("",!0):(n(),r("button",{key:0,onClick:e[3]||(e[3]=(...d)=>l.clearSelection&&l.clearSelection(...d)),type:"button",class:"text-error hover:text-error-tertiary ml-2"},[...e[8]||(e[8]=[i("i",{class:"las la-times text-lg"},null,-1)])]))])])):u("",!0),t.showResults&&t.searchResults.length>0?(n(),r("div",$n,[i("div",Un,[(n(!0),r(y,null,D(t.searchResults,d=>(n(),r("div",{key:d.id,onClick:re(h=>l.selectProduct(d),["stop"]),class:"p-2 hover:bg-info-primary cursor-pointer border-b border-dashed last:border-0"},[i("div",Nn,f(d.name),1),i("div",Wn,f(l.__("Barcode"))+": "+f(d.barcode||d.sku||"N/A"),1)],8,qn))),128))])])):u("",!0),i("input",{type:"hidden",name:s.field.name,value:l.inputValue},null,8,Kn),E(o,{field:s.field},null,8,["field"])])}const Gn=w(Fn,[["render",Qn]]),Zn={data:()=>({clicked:!1,_save:0}),props:["type","to","href","target"],computed:{buttonclass(){switch(this.type){case"info":return"shadow bg-info-secondary text-white";case"success":return"shadow bg-success-secondary text-white";case"error":return"shadow bg-error-secondary text-white";case"warning":return"shadow bg-warning-secondary text-white";default:return"shadow bg-white text-gray-800"}}}},Xn={class:"flex"},Jn=["target","href"];function er(t,e,s,c,a,l){return n(),r("div",Xn,[s.href?(n(),r("a",{key:0,target:s.target,href:s.href,class:m([l.buttonclass,"rounded cursor-pointer py-2 px-3 font-semibold"])},[k(t.$slots,"default")],10,Jn)):u("",!0)])}const tr=w(Zn,[["render",er]]),he={zip:"la-file-archive",tar:"la-file-archive",bz:"la-file-archive","7z":"la-file-archive",css:"la-file-code",js:"la-file-code",json:"la-file-code",docx:"la-file-word",doc:"la-file-word",mp3:"la-file-audio",aac:"la-file-audio",ods:"la-file-audio",pdf:"la-file-pdf",csv:"la-file-csv",avi:"la-file-video",mpeg:"la-file-video",mpkg:"la-file-video",unknown:"la-file"},sr={name:"ns-media",props:["popup"],data(){return{searchFieldDebounce:null,searchField:"",pages:[{label:b("Upload"),name:"upload",selected:!1},{label:b("Gallery"),name:"gallery",selected:!0}],resources:[],isDragging:!1,response:{data:[],current_page:0,from:0,to:0,next_page_url:"",prev_page_url:"",path:"",per_page:0,total:0,last_page:0,first_page:0},fileIcons:he,queryPage:1,bulkSelect:!1,files:[]}},mounted(){this.popupCloser();const t=this.pages.filter(e=>e.name==="gallery")[0];this.select(t),window.addEventListener("paste",this.handlePasteUpload)},beforeDestroy(){window.removeEventListener("paste",this.handlePasteUpload)},watch:{searchField(){clearTimeout(this.searchFieldDebounce),this.searchFieldDebounce=setTimeout(()=>{this.loadGallery(1)},500)}},computed:{postMedia(){return nsHooks.applyFilters("http-client-url","/api/medias")},currentPage(){return this.pages.filter(t=>t.selected)[0]},hasOneSelected(){return this.response.data.filter(t=>t.selected).length>0},selectedResource(){return this.response.data.filter(t=>t.selected)[0]},csrf(){return ns.authentication.csrf},isPopup(){return typeof this.popup<"u"},user_id(){return this.isPopup&&this.popup.params.user_id||0},panelOpened(){return!this.bulkSelect&&this.hasOneSelected},popupInstance(){return this.popup}},methods:{popupCloser:ne,__:b,cancelBulkSelect(){this.bulkSelect=!1,this.response.data.forEach(t=>t.selected=!1)},openError(t){V.show(te,{title:b("An error occured"),message:t.error.message||b("An unexpected error occured.")})},deleteSelected(){V.show($,{title:b("Confirm Your Action"),message:b("You're about to delete selected resources. Would you like to proceed?"),onAction:t=>{t&&H.post("/api/medias/bulk-delete",{ids:this.response.data.filter(e=>e.selected).map(e=>e.id)}).subscribe({next:e=>{C.success(e.message),this.loadGallery()},error:e=>{C.error(e.message)}})}})},loadUploadScreen(){setTimeout(()=>{this.setDropZone()},1e3)},setDropZone(){const t=document.getElementById("dropping-zone");t.addEventListener("dragenter",s=>this.preventDefaults(s),!1),t.addEventListener("dragleave",s=>this.preventDefaults(s),!1),t.addEventListener("dragover",s=>this.preventDefaults(s),!1),t.addEventListener("drop",s=>this.preventDefaults(s),!1),["dragenter","dragover"].forEach(s=>{t.addEventListener(s,()=>{this.isDragging=!0})}),["dragleave","drop"].forEach(s=>{t.addEventListener(s,()=>{this.isDragging=!1})}),t.addEventListener("drop",s=>this.handleDrop(s),!1),this.$refs.files.addEventListener("change",s=>this.processFiles(s.currentTarget.files))},async uploadFiles(){const t=this.files.filter(e=>e.uploaded===!1&&e.progress===0&&e.failed===!1);for(let e=0;e<t.length;e++){const s=t[e];try{s.progress=1;const c=await new Promise((a,l)=>{const o=new FormData;o.append("file",s.file),H.post("/api/medias",o,{headers:{"Content-Type":"multipart/form-data"}}).subscribe({next:d=>{s.uploaded=!0,s.progress=100,C.success(d.message||b("File uploaded successfully."),b("OK")),this.loadGallery(),a(d)},error:d=>{t[e].failed=!0,t[e].error=d,C.error(d.message||b("Failed to upload file."),b("OK")),l(d)}})})}catch{s.failed=!0,C.error(b("An unexpected error occurred during file upload."),b("OK"))}}},handleDrop(t){this.processFiles(t.dataTransfer.files),t.preventDefault(),t.stopPropagation()},preventDefaults(t){t.preventDefault(),t.stopPropagation()},getAllParents(t){let e=[];for(;t.parentNode&&t.parentNode.nodeName.toLowerCase()!="body";)t=t.parentNode,e.push(t);return e},triggerManualUpload(t){const e=t.target;if(e!==null){const c=this.getAllParents(e).map(a=>{const l=a.getAttribute("class");if(l)return l.split(" ")});if(e.getAttribute("class")){const a=e.getAttribute("class").split(" ");c.push(a)}c.flat().includes("ns-scrollbar")||this.$refs.files.click()}},processFiles(t){console.log({files:t});const e=Array.from(t),s=e.filter(a=>(console.log(this),Object.values(window.ns.medias.mimes).includes(a.type))),c=e.length-s.length;c>0&&C.error(c===1?b("1 file was rejected due to invalid file type."):b("%s files were rejected due to invalid file type.").replace("%s",c.toString()),b("OK")),s.forEach(a=>{this.files.unshift({file:a,uploaded:!1,failed:!1,progress:0})}),s.length>0?this.uploadFiles():e.length>0&&s.length===0&&C.error(b("No valid files selected. Please select supported file types."),b("OK"))},select(t){this.pages.forEach(e=>e.selected=!1),t.selected=!0,t.name==="gallery"?this.loadGallery():t.name==="upload"&&this.loadUploadScreen()},loadGallery(t=null){t=t===null?this.queryPage:t,this.queryPage=t,H.get(`/api/medias?page=${t}&user_id=${this.user_id}${this.searchField.length>0?`&search=${this.searchField}`:""}`).subscribe({next:e=>{e.data.forEach(s=>s.selected=!1),this.response=e},error:e=>{C.error(e.message||b("An error occurred while loading the media gallery."),b("OK")),console.error("Media gallery loading error:",e)}})},submitChange(t,e){H.put(`/api/medias/${e.id}`,{name:t.srcElement.textContent}).subscribe({next:s=>{e.fileEdit=!1,C.success(s.message,"OK")},error:s=>{e.fileEdit=!1,C.success(s.message||b("An unexpected error occured."),"OK")}})},useSelectedEntries(){this.popup.params.resolve({event:"use-selected",value:this.response.data.filter(t=>t.selected)}),this.popup.close()},selectResource(t){this.bulkSelect||this.response.data.forEach((e,s)=>{s!==this.response.data.indexOf(t)&&(e.selected=!1)}),t.fileEdit=!1,t.selected=!t.selected},isImage(t){return Object.keys(ns.medias.imageMimes).includes(t.extension)},handlePasteUpload(t){if(this.currentPage.name==="upload"&&t.clipboardData)try{const e=t.clipboardData.items;let s=!1;for(let c=0;c<e.length;c++){const a=e[c];if(a.kind==="file"&&a.type.startsWith("image/")){const l=a.getAsFile();l&&(s=!0,this.files.unshift({file:l,uploaded:!1,failed:!1,progress:0}))}}s?this.uploadFiles():C.error(b("No valid image found in clipboard."),b("OK"))}catch(e){C.error(b("Error processing clipboard content."),b("OK")),console.error("Clipboard paste error:",e)}}}},lr={class:"sidebar w-48 md:h-full flex-shrink-0"},ir={class:"text-xl font-bold my-4 text-center"},nr={class:"sidebar-menus flex md:block mt-8"},rr=["onClick"],dr={key:0,class:"content flex-auto w-full flex-col overflow-hidden flex"},ar={key:0,class:"p-2 flex bg-box-background flex-shrink-0 justify-between"},or={class:"cursor-pointer font-bold text-center text-fontcolor mb-4"},ur={style:{display:"none"},type:"file",name:"",multiple:"",ref:"files",id:""},cr={class:"rounded ns-box rounded-lg shadow w-full md:w-2/3 text-fontcolor p-2"},fr={class:"h-56 overflow-y-auto ns-scrollbar"},hr={key:0},mr={key:0,class:"rounded bg-info-primary flex items-center justify-center text-xs p-2"},br=["onClick"],gr={class:"ml-2"},vr={key:1,class:"h-full w-full items-center justify-center flex text-center text-soft-tertiary"},pr={key:1,class:"content flex-auto flex-col w-full overflow-hidden flex"},yr={key:0,class:"p-2 flex bg-box-background flex-shrink-0 justify-between"},_r={class:"flex flex-auto overflow-hidden"},xr={class:"shadow flex-auto flex flex-col"},kr={class:"p-2 border-b border-input-edge"},wr={class:"ns-input border border-input-edge overflow-hidden rounded flex"},Cr=["placeholder"],Sr={key:0,class:"flex items-center justify-center w-20 p-1"},Tr={class:"flex flex-auto overflow-hidden"},Dr={key:0,class:"p-2 flex-auto overflow-y-auto ns-scrollbar"},Er={class:"grid grid-cols-2 md:grid-cols-3 gap-1 lg:grid-cols-4 xl:grid-cols-6"},Fr=["onClick"],Mr=["src","alt"],Or={key:1,class:"object-cover h-full flex items-center justify-center"},jr={key:1,class:"flex flex-auto items-center justify-center"},Ar={class:"text-2xl font-bold"},Pr={id:"preview",class:"ns-media-preview-panel hidden lg:block w-64 flex-shrink-0"},Lr={key:0,class:"h-64 bg-gray-800 flex items-center justify-center"},Rr=["src","alt"],Hr={key:1,class:"object-cover h-full flex items-center justify-center"},Ir={key:1,id:"details",class:"p-4 text-gray-700 text-sm"},Vr={class:"flex flex-col mb-2"},Br={class:"font-bold block"},Yr=["contenteditable"],zr={class:"flex flex-col mb-2"},$r={class:"font-bold block"},Ur={class:"flex flex-col mb-2"},qr={class:"font-bold block"},Nr={class:"py-2 pr-2 flex ns-media-footer text-sm flex-shrink-0 justify-between"},Wr={class:"flex -mx-2 flex-shrink-0"},Kr={key:0,class:"px-2"},Qr={class:"ns-button shadow rounded overflow-hidden info"},Gr={key:1,class:"px-2"},Zr={class:"ns-button shadow rounded overflow-hidden info"},Xr={key:2,class:"px-2"},Jr={class:"ns-button shadow rounded overflow-hidden warning"},ed={class:"flex-shrink-0 -mx-2 flex"},td={class:"px-2"},sd={class:"rounded shadow overflow-hidden flex text-sm"},ld=["disabled"],id=["disabled"],nd={key:0,class:"px-2"},rd={class:"ns-button info"};function dd(t,e,s,c,a,l){const o=x("ns-close-button");return n(),r("div",{class:m(["flex md:flex-row flex-col ns-box overflow-hidden",l.isPopup?"w-[85.71vw] h-[95vh] shadow-xl":"m-4 w-auto h-full rounded-lg"]),id:"ns-media"},[i("div",lr,[i("h3",ir,f(l.__("Medias Manager")),1),i("ul",nr,[(n(!0),r(y,null,D(a.pages,(d,h)=>(n(),r("li",{onClick:g=>l.select(d),class:m(["py-2 px-3 cursor-pointer border-l-8",d.selected?"active":""]),key:h},f(d.label),11,rr))),128))])]),l.currentPage.name==="upload"?(n(),r("div",dr,[l.isPopup?(n(),r("div",ar,[e[13]||(e[13]=i("div",null,null,-1)),i("div",null,[E(o,{onClick:e[0]||(e[0]=d=>l.popupInstance.close())})])])):u("",!0),i("div",{id:"dropping-zone",onClick:e[1]||(e[1]=d=>l.triggerManualUpload(d)),class:m([a.isDragging?"border-dashed border":"","flex flex-auto m-2 p-2 flex-col border-info-primary items-center justify-center"])},[i("h3",or,f(l.__("Click here or drop your files to upload.")),1),i("input",ur,null,512),i("div",cr,[i("div",fr,[a.files.length>0?(n(),r("ul",hr,[(n(!0),r(y,null,D(a.files,(d,h)=>(n(),r("li",{class:m([d.failed===!1?"border-info-secondary":"border-error-secondary","p-2 mb-2 border-b-2 flex items-center justify-between"]),key:h},[i("span",null,f(d.file.name),1),d.failed===!1?(n(),r("span",mr,f(d.progress)+"%",1)):u("",!0),d.failed===!0?(n(),r("div",{key:1,onClick:g=>l.openError(d),class:"rounded bg-error-primary hover:bg-error-secondary hover:text-white flex items-center justify-center text-xs p-2 cursor-pointer"},[e[14]||(e[14]=i("i",{class:"las la-eye"},null,-1)),e[15]||(e[15]=_()),i("span",gr,f(l.__("See Error")),1)],8,br)):u("",!0)],2))),128))])):u("",!0),a.files.length===0?(n(),r("div",vr,f(l.__("Your uploaded files will displays here.")),1)):u("",!0)])])],2)])):u("",!0),l.currentPage.name==="gallery"?(n(),r("div",pr,[l.isPopup?(n(),r("div",yr,[e[16]||(e[16]=i("div",null,null,-1)),i("div",null,[E(o,{onClick:e[2]||(e[2]=d=>l.popupInstance.close())})])])):u("",!0),i("div",_r,[i("div",xr,[i("div",kr,[i("div",wr,[A(i("input",{id:"search",type:"text","onUpdate:modelValue":e[3]||(e[3]=d=>a.searchField=d),placeholder:l.__("Search Medias"),class:"px-4 block w-full sm:text-sm sm:leading-5 h-10"},null,8,Cr),[[L,a.searchField]]),a.searchField.length>0?(n(),r("div",Sr,[i("button",{onClick:e[4]||(e[4]=d=>a.searchField=""),class:"h-full w-full rounded-tr rounded-br overflow-hidden"},f(l.__("Cancel")),1)])):u("",!0)])]),i("div",Tr,[a.response.data.length>0?(n(),r("div",Dr,[i("div",Er,[(n(!0),r(y,null,D(a.response.data,(d,h)=>(n(),r("div",{key:h},[i("div",null,[i("div",{onClick:g=>l.selectResource(d),class:m([d.selected?"ns-media-image-selected border-secondary ":"border-transparent","border-4 aspect-square bg-secondary/50 overflow-hidden flex items-center justify-center"])},[l.isImage(d)?(n(),r("img",{key:0,class:"object-cover h-full",src:d.sizes.thumb,alt:d.name},null,8,Mr)):u("",!0),l.isImage(d)?u("",!0):(n(),r("div",Or,[i("i",{class:m([a.fileIcons[d.extension]||a.fileIcons.unknown,"las text-8xl text-white"])},null,2)]))],10,Fr)])]))),128))])])):u("",!0),a.response.data.length===0?(n(),r("div",jr,[i("h3",Ar,f(l.__("Nothing has already been uploaded")),1)])):u("",!0)])]),i("div",Pr,[l.panelOpened?(n(),r("div",Lr,[l.isImage(l.selectedResource)?(n(),r("img",{key:0,class:"object-cover h-full",src:l.selectedResource.sizes.thumb,alt:l.selectedResource.name},null,8,Rr)):u("",!0),l.isImage(l.selectedResource)?u("",!0):(n(),r("div",Hr,[i("i",{class:m([a.fileIcons[l.selectedResource.extension]||a.fileIcons.unknown,"las text-8xl text-white"])},null,2)]))])):u("",!0),l.panelOpened?(n(),r("div",Ir,[i("p",Vr,[i("strong",Br,f(l.__("File Name"))+": ",1),i("span",{class:m(["p-2",l.selectedResource.fileEdit?"border-b border-input-edge bg-input-background":""]),onBlur:e[5]||(e[5]=d=>l.submitChange(d,l.selectedResource)),contenteditable:l.selectedResource.fileEdit?"true":"false",onClick:e[6]||(e[6]=d=>l.selectedResource.fileEdit=!0)},f(l.selectedResource.name),43,Yr)]),i("p",zr,[i("strong",$r,f(l.__("Uploaded At"))+":",1),i("span",null,f(l.selectedResource.created_at),1)]),i("p",Ur,[i("strong",qr,f(l.__("By"))+" :",1),i("span",null,f(l.selectedResource.user.username),1)])])):u("",!0)])]),i("div",Nr,[i("div",Wr,[a.bulkSelect?(n(),r("div",Kr,[i("div",Qr,[i("button",{onClick:e[7]||(e[7]=d=>l.cancelBulkSelect()),class:"py-2 px-3"},[e[17]||(e[17]=i("i",{class:"las la-times"},null,-1)),_(" "+f(l.__("Cancel")),1)])])])):u("",!0),l.hasOneSelected&&!a.bulkSelect?(n(),r("div",Gr,[i("div",Zr,[i("button",{onClick:e[8]||(e[8]=d=>a.bulkSelect=!0),class:"py-2 px-3"},[e[18]||(e[18]=i("i",{class:"las la-check-circle"},null,-1)),_(" "+f(l.__("Bulk Select")),1)])])])):u("",!0),l.hasOneSelected?(n(),r("div",Xr,[i("div",Jr,[i("button",{onClick:e[9]||(e[9]=d=>l.deleteSelected()),class:"py-2 px-3"},[e[19]||(e[19]=i("i",{class:"las la-trash"},null,-1)),_(" "+f(l.__("Delete")),1)])])])):u("",!0)]),i("div",ed,[i("div",td,[i("div",sd,[i("div",{class:m(["ns-button",a.response.current_page===1?"disabled cursor-not-allowed":"info"])},[i("button",{disabled:a.response.current_page===1,onClick:e[10]||(e[10]=d=>l.loadGallery(a.response.current_page-1)),class:"p-2"},f(l.__("Previous")),9,ld)],2),e[20]||(e[20]=i("hr",{class:"border-r mx-1 border-gray-700"},null,-1)),i("div",{class:m(["ns-button",a.response.current_page===a.response.last_page?"disabled cursor-not-allowed":"info"])},[i("button",{disabled:a.response.current_page===a.response.last_page,onClick:e[11]||(e[11]=d=>l.loadGallery(a.response.current_page+1)),class:"p-2"},f(l.__("Next")),9,id)],2)])]),l.isPopup&&l.hasOneSelected?(n(),r("div",nd,[i("div",rd,[i("button",{class:"rounded shadow p-2 text-sm",onClick:e[12]||(e[12]=d=>l.useSelectedEntries())},f(l.__("Use Selected")),1)])])):u("",!0)])])])):u("",!0)],2)}const me=w(sr,[["render",dd]]),eu=Object.freeze(Object.defineProperty({__proto__:null,default:me},Symbol.toStringTag,{value:"Module"})),ad={computed:{hasError(){return this.field.errors!==void 0&&this.field.errors.length>0},disabledClass(){return this.field.disabled?"ns-disabled cursor-not-allowed":""},inputClass(){return this.disabledClass+" "+this.leadClass},leadClass(){return this.leading?"pl-8":"px-4"}},data(){return{fileIcons:he}},props:["placeholder","leading","type","field"],mounted(){},methods:{isImage(t){return Object.keys(ns.medias.imageMimes).includes(t.extension)},toggleMedia(){new Promise((e,s)=>{V.show(me,{resolve:e,reject:s,...this.field.data||{}})}).then(e=>{e.event==="use-selected"&&(!this.field.data||this.field.data.type==="url"?this.field.value=e.value[0].sizes.original:!this.field.data||this.field.data.type==="model"?(this.field.value=e.value[0].id,this.field.data.model=e.value[0]):this.field.value=e.value[0].sizes.original,this.$forceUpdate())})}}},od=["for"],ud={class:"mt-1 relative border rounded-md focus:shadow-sm"},cd={key:0,class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},fd={class:"text-fontcolor sm:text-sm sm:leading-5"},hd={class:"rounded overflow-hidden flex"},md={key:0,class:"form-input flex w-full sm:text-sm items-center sm:leading-5 h-10"},bd=["src","alt"],gd={key:1,class:"object-cover flex items-center justify-center"},vd={class:"text-xs text-fontcolor-soft"},pd=["disabled","id","type","placeholder"];function yd(t,e,s,c,a,l){const o=x("ns-field-description");return n(),r("div",{class:m(["flex flex-col mb-2 flex-auto ns-media",l.hasError?"has-error":"is-pristine"])},[i("label",{for:s.field.name,class:"block leading-5 font-medium"},[k(t.$slots,"default")],8,od),i("div",ud,[s.leading?(n(),r("div",cd,[i("span",fd,f(s.leading),1)])):u("",!0),i("div",hd,[s.field.data&&s.field.data.type==="model"?(n(),r("div",md,[s.field.value&&s.field.data.model.name?(n(),r(y,{key:0},[l.isImage(s.field.data.model)?(n(),r("img",{key:0,class:"w-8 h-8 m-1",src:s.field.data.model.sizes.thumb,alt:s.field.data.model.name},null,8,bd)):u("",!0),l.isImage(s.field.data.model)?u("",!0):(n(),r("div",gd,[i("i",{class:m([a.fileIcons[s.field.data.model.extension]||a.fileIcons.unknown,"las text-3xl"])},null,2)])),i("span",vd,f(s.field.data.model.name),1)],64)):u("",!0)])):u("",!0),!s.field.data||s.field.data.type==="undefined"||s.field.data.type==="url"?A((n(),r("input",{key:1,"onUpdate:modelValue":e[0]||(e[0]=d=>s.field.value=d),disabled:s.field.disabled,onBlur:e[1]||(e[1]=d=>t.$emit("blur",this)),onChange:e[2]||(e[2]=d=>t.$emit("change",this)),id:s.field.name,type:s.type||s.field.type||"text",class:m([l.inputClass,"form-input block w-full sm:text-sm sm:leading-5 h-10"]),placeholder:s.placeholder},null,42,pd)),[[de,s.field.value]]):u("",!0),i("button",{onClick:e[3]||(e[3]=d=>l.toggleMedia(s.field)),class:"w-10 h-10 flex items-center justify-center border-l outline-hidden"},[...e[4]||(e[4]=[i("i",{class:"las la-photo-video"},null,-1)])])])]),E(o,{field:s.field},null,8,["field"])],2)}const _d=w(ad,[["render",yd]]),xd={data:()=>({defaultToggledState:!1,_save:0,hasChildren:!1}),props:["href","to","label","icon","notification","toggled","identifier"],mounted(){this.hasChildren=this.$el.querySelectorAll(".submenu").length>0,this.defaultToggledState=this.toggled!==void 0?this.toggled:this.defaultToggledState,nsEvent.subject().subscribe(t=>{t.value!==this.identifier&&(this.defaultToggledState=!1)})},methods:{toggleEmit(){this.toggle().then(t=>{t&&nsEvent.emit({identifier:"side-menu.open",value:this.identifier})})},goTo(t,e){return this.$router.push(t),e.preventDefault(),!1},toggle(){return new Promise((t,e)=>{(!this.href||this.href.length===0)&&(this.defaultToggledState=!this.defaultToggledState,t(this.defaultToggledState))})}}},kd=["href"],wd={class:"flex items-center"},Cd={key:0,class:"rounded-full notification-label font-bold w-6 h-6 text-xs justify-center items-center flex"},Sd=["href"],Td={class:"flex items-center"},Dd={key:0,class:"rounded-full notification-label font-bold w-6 h-6 text-xs justify-center items-center flex"},Ed={key:1,class:"flex items-center"},Fd={key:0,class:"las la-angle-down"},Md={key:1,class:"las la-angle-up"};function Od(t,e,s,c,a,l){return n(),r("li",null,[s.to&&!t.hasChildren?(n(),r("a",{key:0,onClick:e[0]||(e[0]=o=>l.goTo(s.to,o)),href:s.to,class:m([t.defaultToggledState?"toggled":"normal","flex justify-between py-2 border-l-8 px-3 font-bold ns-aside-menu"])},[i("span",wd,[i("i",{class:m(["las text-lg mr-2",s.icon?.length>0?s.icon:"la-star"])},null,2),_(" "+f(s.label),1)]),s.notification>0?(n(),r("span",Cd,f(s.notification),1)):u("",!0)],10,kd)):(n(),r("a",{key:1,onClick:e[1]||(e[1]=o=>l.toggleEmit()),href:s.href||"javascript:void(0)",class:m([t.defaultToggledState?"toggled":"normal","flex justify-between py-2 border-l-8 px-3 font-bold ns-aside-menu"])},[i("span",Td,[i("i",{class:m(["las text-lg mr-2",s.icon?.length>0?s.icon:"la-star"])},null,2),_(" "+f(s.label),1)]),s.notification>0?(n(),r("span",Dd,f(s.notification),1)):u("",!0),t.hasChildren?(n(),r("span",Ed,[t.defaultToggledState?u("",!0):(n(),r("i",Fd)),t.defaultToggledState?(n(),r("i",Md)):u("",!0)])):u("",!0)],10,Sd)),i("ul",{class:m([t.defaultToggledState?"":"hidden","submenu-wrapper"])},[k(t.$slots,"default")],2)])}const jd=w(xd,[["render",Od]]),Ad={data(){return{showPanel:!1,search:"",eventListener:null}},emits:["change","blur"],props:["field"],computed:{hasError(){return this.field.errors!==void 0&&this.field.errors.length>0},_filtredOptions(){let t=this._options;return this.search.length>0&&(t=this._options.filter(e=>e.label.toLowerCase().search(this.search.toLowerCase())!==-1)),t.filter(e=>e.selected===!1)},_options(){return this.field.options.map(t=>(t.selected=t.selected===void 0?!1:t.selected,this.field.value&&this.field.value.includes(t.value)&&(t.selected=!0),t))}},methods:{__:b,togglePanel(){this.field.disabled||(this.showPanel=!this.showPanel)},selectAvailableOptionIfPossible(){this._filtredOptions.length>0&&this.addOption(this._filtredOptions[0])},addOption(t){this.field.disabled||(this.$emit("addOption",t),this.$forceUpdate(),setTimeout(()=>{this.search=""},100))},removeOption(t,e){if(!this.field.disabled)return e.preventDefault(),e.stopPropagation(),this.$emit("removeOption",t),this.$forceUpdate(),setTimeout(()=>{this.search=""},100),!1}},mounted(){this.field.value&&this.field.value.reverse().forEach(e=>{const s=this.field.options.filter(c=>c.value===e);s.length>0&&this.addOption(s[0])}),this.eventListener=document.addEventListener("click",t=>{let s=t.target.parentElement,c=!1;if(this.showPanel){for(;s;){if(s&&s.classList.contains("ns-multiselect")&&!s.classList.contains("arrows")){c=!0;break}s=s.parentElement}c===!1&&this.togglePanel()}})}},Pd=["for"],Ld={class:"flex flex-col"},Rd={class:"flex -mx-1 -my-1 flex-wrap"},Hd={class:"rounded selected-pills flex justify-between p-1 items-center"},Id={class:"pr-8 text-xs"},Vd=["onClick"],Bd={class:"arrows ml-1"},Yd={class:"ns-dropdown shadow border rounded-b-md"},zd={class:"search border-b border-input-option-hover"},$d={class:"h-40 overflow-y-auto"},Ud=["onClick"],qd={key:0,class:"las la-check"},Nd={key:0,class:"p-2 text-center text-fontcolor"},Wd={class:"my-2"};function Kd(t,e,s,c,a,l){const o=x("ns-field-description");return n(),r("div",{class:m(["flex flex-col ns-multiselect",l.hasError?"has-error":"is-pristine"])},[i("label",{for:s.field.name,class:"block mb-1 leading-5 font-medium"},[k(t.$slots,"default")],8,Pd),i("div",Ld,[i("div",{onClick:e[0]||(e[0]=d=>l.togglePanel()),class:m([(s.field.disabled?"disabled":"")+" "+(a.showPanel?"toggled":"untoggled"),"overflow-y-auto flex select-preview justify-between border p-2 items-start"]),style:{"max-height":"150px"}},[i("div",Rd,[(n(!0),r(y,null,D(l._options.filter(d=>d.selected),(d,h)=>(n(),r("div",{key:h,class:"px-1 my-1"},[i("div",Hd,[i("span",Id,f(d.label),1),i("button",{onClick:g=>l.removeOption(d,g),class:"rounded outline-hidden hover:bg-info-tertiary h-4 w-4 flex items-center justify-center"},[...e[3]||(e[3]=[i("i",{class:"las la-times"},null,-1)])],8,Vd)])]))),128))]),i("div",Bd,[i("span",{class:m(a.showPanel?"":"hidden")},[...e[4]||(e[4]=[i("i",{class:"las la-angle-down"},null,-1)])],2),i("span",{class:m(a.showPanel?"hidden":"")},[...e[5]||(e[5]=[i("i",{class:"las la-angle-up"},null,-1)])],2)])],2),a.showPanel?(n(),r("div",{key:0,class:m(["h-0 z-10",a.showPanel?"shadow":""]),style:{"margin-top":"-2px","margin-bottom":"2px"}},[i("div",Yd,[i("div",zd,[A(i("input",{onKeypress:e[1]||(e[1]=B(d=>l.selectAvailableOptionIfPossible(),["enter"])),"onUpdate:modelValue":e[2]||(e[2]=d=>a.search=d),class:"p-2 w-full bg-transparent text-fontcolor outline-hidden",placeholder:"Search"},null,544),[[L,a.search]])]),i("div",$d,[(n(!0),r(y,null,D(l._filtredOptions,(d,h)=>(n(),r("div",{onClick:g=>l.addOption(d),key:h,class:m([d.selected?"selected":"","option p-2 flex justify-between cursor-pointer"])},[i("span",null,f(d.label),1),i("span",null,[d.checked?(n(),r("i",qd)):u("",!0)])],10,Ud))),128))]),l._options.length===0?(n(),r("div",Nd,f(l.__("Nothing to display")),1)):u("",!0)])],2)):u("",!0)]),i("div",Wd,[E(o,{field:s.field},null,8,["field"])])],2)}const Qd=w(Ad,[["render",Kd]]),Gd={class:"w-[85.71vw] md:w-[57.14vw] lg:w-[42.86vw] flex flex-col shadow-lg bg-popup-surface"},Zd={class:"flex flex-col"},Xd={class:"h-24 font-bold text-4xl text-fontcolor flex justify-center items-center"},Jd=Ee({__name:"ns-numpad-popup",props:["popup"],setup(t){let e=Y("");const s=t,c=l=>{e.value=l},a=()=>{s.popup.params.resolve(e.value),s.popup.close()};return le(()=>{e.value=s.popup.params.value}),(l,o)=>{const d=x("ns-numpad-plus");return n(),r("div",Gd,[i("div",Zd,[i("div",Xd,f(ee(e)),1),E(d,{onChanged:o[0]||(o[0]=h=>c(h)),onNext:o[1]||(o[1]=h=>a()),value:ee(e)},null,8,["value"])])])}}}),ea={},ta={class:"my-4"},sa={class:"font-bold text-2xl"},la={class:"text-fontcolor"};function ia(t,e){return n(),r("div",ta,[i("h2",sa,[k(t.$slots,"title")]),i("span",la,[k(t.$slots,"description")])])}const na=w(ea,[["render",ia]]),ra={name:"ns-search",props:["url","placeholder","value","label","method","searchArgument"],data(){return{searchText:"",searchTimeout:null,results:[]}},methods:{__:b,selectOption(t){this.$emit("select",t),this.searchText="",this.results=[]},renderLabel(t,e){return typeof e=="object"?e.map(s=>t[s]).join(" "):t[e]}},watch:{searchText(){clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.searchText.length>0&&H[this.method||"post"](this.url,{[this.searchArgument||"search"]:this.searchText}).subscribe({next:t=>{this.results=t},error:t=>{C.error(t.message||b("An unexpected error occurred."))}})},1e3)}},mounted(){}},da={class:"ns-search"},aa={class:"input-group info border-2"},oa=["placeholder"],ua={class:"relative"},ca={class:"w-full absolute shadow-lg"},fa={key:0,class:"ns-vertical-menu"},ha=["onClick"];function ma(t,e,s,c,a,l){return n(),r("div",da,[i("div",aa,[A(i("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>a.searchText=o),class:"p-2 w-full outline-hidden",placeholder:s.placeholder||l.__("Search..."),id:""},null,8,oa),[[L,a.searchText]])]),i("div",ua,[i("div",ca,[a.results.length>0&&a.searchText.length>0?(n(),r("ul",fa,[(n(!0),r(y,null,D(a.results,(o,d)=>(n(),r("li",{class:"border-b p-2 cursor-pointer",onClick:h=>l.selectOption(o),key:d},f(l.renderLabel(o,s.label)),9,ha))),128))])):u("",!0)])])])}const ba=w(ra,[["render",ma]]),ga={data:()=>({searchField:"",showResults:!1,subscription:null}),name:"ns-search-select",emits:["saved","change"],props:["name","placeholder","field","leading"],computed:{selectedOptionLabel(){if(this.field.value===null||this.field.value===void 0)return b("Choose...");const t=this.field.options.filter(e=>e.value===this.field.value);return t.length>0?t[0].label:b("Choose...")},filtredOptions(){return this.searchField.length>0?this.field.options.filter(t=>new RegExp(this.searchField,"i").test(t.label)).splice(0,10):this.field.options},hasError(){return this.field.errors!==void 0&&this.field.errors.length>0},disabledClass(){return this.field.disabled?"ns-disabled cursor-not-allowed":""},inputClass(){return this.disabledClass+" "+this.leadClass},leadClass(){return this.leading?"pl-8":"px-4"}},watch:{showResults(){this.showResults===!0&&setTimeout(()=>{this.$refs.searchInputField.select()},50)}},mounted(){const t=this.field.options.filter(e=>e.value===this.field.value);t.length>0&&[null,void 0].includes(this.field.value)&&this.selectOption(t[0]),this.field.subject&&(this.subscription=this.field.subject.subscribe(({field:e,fields:s})=>{if(e&&s&&this.field.refresh&&e.name===this.field.refresh.watch){const c=this.field.refresh.url,a=this.field.refresh.data,l={identifier:e.value,...a};nsHttpClient.post(c,l).subscribe({next:o=>{this.field.options=o},error:o=>{console.error(o)}})}})),document.addEventListener("click",e=>{this.$el.contains(e.target)===!1&&(this.showResults=!1)})},destroyed(){this.subscription&&this.subscription.unsubscribe()},methods:{__:b,hasSelectedValues(t){return t.options.map(s=>s.value).includes(t.value)},resetSelectedInput(t){t.disabled||(t.value=null,this.$emit("change",null),this.showResults=!1,this.searchField="")},selectFirstOption(){this.filtredOptions.length>0&&this.selectOption(this.filtredOptions[0])},selectOption(t){this.field.value=t.value,this.$emit("change",t.value),this.searchField="",this.showResults=!1},async triggerDynamicComponent(t){try{this.showResults=!1;const e=nsExtraComponents[t.component]||nsComponents[t.component];e===void 0&&C.error(b(`The component ${t.component} cannot be loaded. Make sure it's injected on nsExtraComponents object.`));const s=await new Promise((c,a)=>{const l=V.show(e,{...t.props||{},field:this.field,resolve:c,reject:a})});this.$emit("saved",s)}catch{}},triggerFieldAbout(t){nsNotice.info(b("About this field"),t.about,{duration:5e3})}}},va=["disabled"],pa=["for"],ya={class:"text-fontcolor text-sm"},_a={key:0,class:"relative"},xa={class:"w-full overflow-hidden -top-[5px] ns-select-results border rounded-b-md shadow z-10 absolute"},ka={class:"border-b border-dashed p-2 filter-input-wrapper"},wa=["placeholder"],Ca={class:"h-60 overflow-y-auto"},Sa=["onClick"];function Ta(t,e,s,c,a,l){const o=x("ns-field-description");return s.field?(n(),r("div",{key:0,class:m(["flex flex-col flex-auto ns-select",l.hasError?"has-error":"is-pristine"]),disabled:s.field.disabled},[i("label",{for:s.field.name,class:"block leading-5 font-medium"},[k(t.$slots,"default")],8,pa),i("div",{class:m([(s.field.disabled?"cursor-not-allowed":"cursor-default")+" "+(t.showResults?"rounded-t-md":"rounded-md"),"border mt-1 relative shadow-sm mb-1 flex overflow-hidden"])},[i("div",{onClick:e[0]||(e[0]=d=>!s.field.disabled&&(t.showResults=!t.showResults)),class:"placeholder flex-auto h-10 sm:leading-5 py-2 px-4 flex items-center"},[i("span",ya,f(l.selectedOptionLabel),1)]),l.hasSelectedValues(s.field)&&!s.field.disabled?(n(),r("button",{key:0,onClick:e[1]||(e[1]=d=>l.resetSelectedInput(s.field)),class:"flex items-center justify-center w-10 border-l hover:cursor-pointer hover:bg-error-tertiary hover:text-white border-input-edge"},[...e[6]||(e[6]=[i("i",{class:"las la-times"},null,-1)])])):u("",!0),s.field.component&&!s.field.disabled?(n(),r("button",{key:1,onClick:e[2]||(e[2]=d=>l.triggerDynamicComponent(s.field)),class:"flex items-center justify-center w-10 hover:cursor-pointer border-l"},[...e[7]||(e[7]=[i("i",{class:"las la-plus"},null,-1)])])):u("",!0),s.field.about?(n(),r("button",{key:2,onClick:e[3]||(e[3]=d=>l.triggerFieldAbout(s.field)),class:"flex items-center justify-center w-10 hover:cursor-pointer border-l"},[...e[8]||(e[8]=[i("i",{class:"las la-question-circle text-2xl text-font"},null,-1)])])):u("",!0)],2),t.showResults?(n(),r("div",_a,[i("div",xa,[i("div",ka,[A(i("input",{onKeypress:e[4]||(e[4]=B(d=>l.selectFirstOption(),["enter"])),ref:"searchInputField","onUpdate:modelValue":e[5]||(e[5]=d=>t.searchField=d),type:"text",placeholder:l.__("Search result")},null,40,wa),[[L,t.searchField]])]),i("div",Ca,[i("ul",null,[(n(!0),r(y,null,D(l.filtredOptions,d=>(n(),r("li",{onClick:h=>l.selectOption(d),class:"py-1 px-2 hover:bg-info-primary cursor-pointer text-font"},f(d.label),9,Sa))),256))])])])])):u("",!0),E(o,{field:s.field},null,8,["field"])],10,va)):u("",!0)}const Da=w(ga,[["render",Ta]]),Ea={data:()=>({}),props:["name","placeholder","field","leading"],computed:{hasError(){return this.field.errors!==void 0&&this.field.errors.length>0},disabledClass(){return this.field.disabled?"ns-disabled cursor-not-allowed":""},inputClass(){return this.disabledClass+" "+this.leadClass},leadClass(){return this.leading?"pl-8":"px-4"},flattenedOptions(){return this.flattenOptions(this.field.options||[],0,[])}},mounted(){},methods:{__:b,flattenOptions(t,e=0,s=[]){const c=[];return t.forEach((a,l)=>{const o=l===t.length-1,d=Array.isArray(a.value);let h="";for(let v=0;v<e;v++)v===e-1?h+=o?"â””â”€ ":"â”œâ”€ ":h+=s[v]?"Â Â Â Â ":"â”‚Â Â ";const g=a.disabled!==void 0?a.disabled:d;if(d){c.push({label:h+a.label,value:a.value,disabled:g,level:e,isParent:!0});const v=[...s,o],M=this.flattenOptions(a.value,e+1,v);c.push(...M)}else c.push({label:h+a.label,value:a.value,disabled:g,level:e,isParent:!1})}),c}}},Fa=["for"],Ma={class:"border mt-1 relative rounded-md shadow-sm mb-1 overflow-hidden"},Oa=["disabled","name"],ja={value:null},Aa=["value","disabled"];function Pa(t,e,s,c,a,l){const o=x("ns-field-description");return n(),r("div",{class:m(["flex flex-col flex-auto ns-select",l.hasError?"has-error":"is-pristine"])},[i("label",{for:s.field.name,class:"block leading-5 font-medium"},[k(t.$slots,"default")],8,Fa),i("div",Ma,[A(i("select",{disabled:s.field.disabled?s.field.disabled:!1,name:s.field.name,"onUpdate:modelValue":e[0]||(e[0]=d=>s.field.value=d),class:m([l.inputClass,"form-input block w-full pl-7 pr-12 sm:text-sm sm:leading-5 h-10 appearance-none"])},[i("option",ja,f(l.__("Choose an option")),1),(n(!0),r(y,null,D(l.flattenedOptions,(d,h)=>(n(),r("option",{key:h,value:d.value,disabled:d.disabled,class:"py-2"},f(d.label),9,Aa))),128))],10,Oa),[[Z,s.field.value]])]),E(o,{field:s.field},null,8,["field"])],2)}const La=w(Ea,[["render",Pa]]),Ra={data:()=>({}),props:["name","placeholder","field","leading"],computed:{hasError(){return this.field.errors!==void 0&&this.field.errors.length>0},disabledClass(){return this.field.disabled?"bg-gray-200 cursor-not-allowed":"bg-transparent"},inputClass(){return this.disabledClass+" "+this.leadClass},leadClass(){return this.leading?"pl-8":"px-4"}},methods:{__:b,playSelectedSound(){this.field.value!==null&&this.field.value.length>0&&new Audio(this.field.value).play()}}},Ha={class:"flex flex-col flex-auto ns-select-audio"},Ia=["for"],Va=["disabled","name"],Ba=["value"];function Ya(t,e,s,c,a,l){const o=x("ns-field-description");return n(),r("div",Ha,[i("label",{for:s.field.name,class:m([l.hasError?"has-error":"is-pristine","block leading-5 font-medium"])},[k(t.$slots,"default")],10,Ia),i("div",{class:m([l.hasError?"error":"","mt-1 flex relative mb-1 form-input"])},[i("button",{onClick:e[0]||(e[0]=d=>l.playSelectedSound()),class:"rounded-l border w-12 flex-auto flex items-center justify-center"},[...e[3]||(e[3]=[i("i",{class:"las la-play text-2xl"},null,-1)])]),A(i("select",{disabled:s.field.disabled?s.field.disabled:!1,onChange:e[1]||(e[1]=d=>t.$emit("change",d)),name:s.field.name,"onUpdate:modelValue":e[2]||(e[2]=d=>s.field.value=d),class:m([l.inputClass,"text-fontcolor block w-full pl-7 pr-12 sm:text-sm sm:leading-5 h-10 outline-hidden"])},[(n(!0),r(y,null,D(s.field.options,(d,h)=>(n(),r("option",{key:h,value:d.value,class:"py-2"},f(d.label),9,Ba))),128))],42,Va),[[Z,s.field.value]])],2),E(o,{field:s.field},null,8,["field"])])}const za=w(Ra,[["render",Ya]]),$a={data:()=>({}),mounted(){},computed:{validatedSize(){return this.size||24},validatedBorder(){return this.border||8},validatedAnimation(){return this.animation||"fast"}},props:["color","size","border","animation"]},Ua={class:"flex items-center justify-center"};function qa(t,e,s,c,a,l){return n(),r("div",Ua,[i("div",{class:m(["loader ease-linear rounded-full border-gray-200",l.validatedAnimation+" border-4 border-t-4 w-"+l.validatedSize+" h-"+l.validatedSize])},null,2)])}const Na=w($a,[["render",qa]]),Wa={data:()=>({}),props:["href","label","active","to"],mounted(){},methods:{goTo(t,e){return this.$router.push(t),e.preventDefault(),!1}}},Ka={class:"submenu"},Qa=["href"],Ga=["href"];function Za(t,e,s,c,a,l){return n(),r("div",null,[i("li",Ka,[s.href?(n(),r("a",{key:0,class:m([s.active?"font-bold active":"normal","py-2 border-l-4 px-4 block ns-aside-submenu"]),href:s.href},[k(t.$slots,"default")],10,Qa)):s.to?(n(),r("a",{key:1,class:m([s.active?"font-bold active":"normal","py-2 border-l-4 px-4 block ns-aside-submenu"]),onClick:e[0]||(e[0]=o=>l.goTo(s.to,o)),href:s.to},[k(t.$slots,"default")],10,Ga)):u("",!0)])])}const Xa=w(Wa,[["render",Za]]),Ja={props:["options","row","columns","prependOptions","showOptions","showCheckboxes"],data:()=>({optionsToggled:!1}),mounted(){},methods:{__:b,sanitizeHTML(t){var e=document.createElement("div");e.innerHTML=t;for(var s=e.getElementsByTagName("script"),c=s.length;c--;)s[c].parentNode.removeChild(s[c]);return e.innerHTML},getElementOffset(t){const e=t.getBoundingClientRect();return{top:e.top+window.pageYOffset,left:e.left+window.pageXOffset}},toggleMenu(t){if(this.row.$toggled=!this.row.$toggled,this.$emit("toggled",this.row),this.row.$toggled)setTimeout(()=>{const e=this.$el.querySelectorAll(".dropdown-holder > .ns-menu-wrapper")[0],s=this.$el.querySelectorAll(".dropdown-holder")[0],c=this.getElementOffset(s);e.style.top=c.top+"px",e.style.left=c.left+"px",e.classList.remove("hidden"),s!==void 0&&(s.classList.remove("off"),s.classList.add("on"))},100);else{const e=this.$el.querySelectorAll(".dropdown-holder")[0];e.classList.remove("on"),e.classList.add("off")}},handleChanged(t){this.row.$checked=t,this.$emit("updated",this.row)},triggerAsync(t){t.confirm!==null?Popup.show($,{title:t.confirm.title||b("Confirm Your Action"),message:t.confirm.message||b("Would you like to delete this entry?"),onAction:e=>{e&&H[t.type.toLowerCase()](t.url).subscribe(s=>{C.success(s.message),this.$emit("reload",this.row)},s=>{this.toggleMenu(),C.error(s.message)})}}):(nsEvent.emit({identifier:"ns-table-row-action",value:{action:t,row:this.row,component:this}}),this.toggleMenu())},triggerPopup(t,e){const s=window.nsExtraComponents[t.component];if(t.component)return s?new Promise((c,a)=>{Popup.show(s,{resolve:c,reject:a,row:e,action:t})}):C.error(b(`Unable to load the component "${t.component}". Make sure the component is registered to "nsExtraComponents".`));this.triggerAsync(t)}}},eo={key:0,class:"font-sans text-center align-middle p-1"},to={key:1,class:"font-sans p-1"},so={class:""},lo={class:"dropdown-holder"},io={key:0,class:"zoom-in-entrance anim-duration-300 ns-menu-wrapper hidden z-50 origin-top-left mt-2"},no={class:"rounded-md"},ro={role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu"},ao=["href","target","innerHTML"],oo=["onClick","innerHTML"],uo=["href","innerHTML"],co=["innerHTML"],fo={class:"flex md:-mx-1 md:flex-wrap flex-col md:flex-row text-xs"},ho={class:"md:px-1 w-full md:w-1/2 lg:w-2/4"},mo=["innerHTML"],bo={key:2},go={key:2,class:"font-sans p-1 flex flex-col items-center justify-center"},vo={class:""},po={class:"dropdown-holder"},yo={key:0,class:"zoom-in-entrance anim-duration-300 z-50 origin-bottom-right mt-2 -ml-31 w-56 absolute rounded-md shadow-lg ns-menu-wrapper"},_o={class:"rounded-md"},xo={role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu"},ko=["href","target","innerHTML"],wo=["onClick","innerHTML"];function Co(t,e,s,c,a,l){const o=x("ns-checkbox");return n(),r("tr",{class:m(["ns-table-row border text-sm",s.row.$cssClass?s.row.$cssClass:""])},[s.showCheckboxes?(n(),r("td",eo,[E(o,{class:"inline-block",onChange:e[0]||(e[0]=d=>l.handleChanged(d)),checked:s.row.$checked},null,8,["checked"])])):u("",!0),s.prependOptions&&s.showOptions?(n(),r("td",to,[i("div",so,[i("button",{onClick:e[1]||(e[1]=d=>l.toggleMenu(d)),class:m([s.row.$toggled?"active":"","ns-inset-button outline-hidden rounded-full w-24 text-sm p-1 border"])},[e[5]||(e[5]=i("i",{class:"las la-ellipsis-h"},null,-1)),_(" "+f(l.__("Options")),1)],2),s.row.$toggled?(n(),r("div",{key:0,onClick:e[2]||(e[2]=d=>l.toggleMenu(d)),class:"absolute w-full h-full z-10 top-0 left-0"})):u("",!0),i("div",lo,[s.row.$toggled?(n(),r("div",io,[i("div",no,[i("div",ro,[(n(!0),r(y,null,D(s.row.$actions,(d,h)=>(n(),r(y,{key:h},[["GOTO","TAB"].includes(d.type)?(n(),r("a",{key:0,href:d.url,target:d.type==="TAB"?"_blank":"_self",class:"ns-action-button block px-4 py-2 text-sm leading-5",role:"menuitem",innerHTML:l.sanitizeHTML(d.label)},null,8,ao)):u("",!0),["GET","DELETE","POPUP"].includes(d.type)?(n(),r("a",{key:1,href:"javascript:void(0)",onClick:g=>l.triggerAsync(d),class:"ns-action-button block px-4 py-2 text-sm leading-5",role:"menuitem",innerHTML:l.sanitizeHTML(d.label)},null,8,oo)):u("",!0)],64))),128))])])])):u("",!0)])])])):u("",!0),(n(!0),r(y,null,D(s.columns,(d,h)=>(n(),r("td",{key:h,class:"font-sans p-1"},[s.row[h]&&s.row[h].type&&s.row[h].type==="link"?(n(),r("a",{key:0,target:"_blank",href:s.row[h].href,innerHTML:l.sanitizeHTML(s.row[h].label)},null,8,uo)):u("",!0),typeof s.row[h]=="string"||typeof s.row[h]=="number"?(n(),r(y,{key:1},[d.attributes&&d.attributes.length>0?(n(),r(y,{key:0},[i("h3",{class:"fond-bold text-lg",innerHTML:l.sanitizeHTML(s.row[h])},null,8,co),i("div",fo,[(n(!0),r(y,null,D(d.attributes,g=>(n(),r("div",ho,[i("strong",null,f(g.label),1),_(": "+f(s.row[g.column]),1)]))),256))])],64)):(n(),r("div",{key:1,innerHTML:l.sanitizeHTML(s.row[h])},null,8,mo))],64)):u("",!0),s.row[h]===null?(n(),r("div",bo,f(l.__("Undefined")),1)):u("",!0)]))),128)),!s.prependOptions&&s.showOptions?(n(),r("td",go,[i("div",vo,[i("button",{onClick:e[3]||(e[3]=d=>l.toggleMenu(d)),class:m([s.row.$toggled?"active":"","ns-inset-button outline-hidden rounded-full w-24 text-sm p-1 border"])},[e[6]||(e[6]=i("i",{class:"las la-ellipsis-h"},null,-1)),_(" "+f(l.__("Options")),1)],2),s.row.$toggled?(n(),r("div",{key:0,onClick:e[4]||(e[4]=d=>l.toggleMenu(d)),class:"absolute w-full h-full z-10 top-0 left-0"})):u("",!0),i("div",po,[s.row.$toggled?(n(),r("div",yo,[i("div",_o,[i("div",xo,[(n(!0),r(y,null,D(s.row.$actions,(d,h)=>(n(),r(y,{key:h},[["GOTO","TAB"].includes(d.type)?(n(),r("a",{key:0,href:d.url,target:d.type==="TAB"?"_blank":"_self",class:"ns-action-button block px-4 py-2 text-sm leading-5",role:"menuitem",innerHTML:l.sanitizeHTML(d.label)},null,8,ko)):u("",!0),["GET","DELETE","POPUP"].includes(d.type)?(n(),r("a",{key:1,href:"javascript:void(0)",onClick:g=>l.triggerAsync(d),class:"ns-action-button block px-4 py-2 text-sm leading-5",role:"menuitem",innerHTML:l.sanitizeHTML(d.label)},null,8,wo)):u("",!0)],64))),128))])])])):u("",!0)])])])):u("",!0)],2)}const So=w(Ja,[["render",Co]]),To={data(){return{childrens:[],tabState:new Me}},props:["active"],computed:{activeComponent(){const t=this.childrens.filter(e=>e.active);return t.length>0?t[0]:!1}},beforeUnmount(){this.tabState.unsubscribe()},watch:{active(t,e){this.childrens.forEach(s=>{s.active=s.identifier===t,s.active&&this.toggle(s)})}},mounted(){this.buildChildrens(this.active)},methods:{__:b,toggle(t){this.$emit("active",t.identifier),this.$emit("changeTab",t.identifier),this.tabState.next(t)},buildChildrens(t){this.childrens=Array.from(this.$el.querySelectorAll(".ns-tab-item")).map(s=>{const c=s.getAttribute("identifier")||void 0;let a=!0;return s.getAttribute("visible")&&(a=s.getAttribute("visible")==="true"),{el:s,active:!!(t&&t===c),identifier:c,closable:s.getAttribute("closable")==="true",initialized:!1,visible:a,label:s.getAttribute("label")||b("Unamed Tab")}}).filter(s=>s.visible),!(this.childrens.filter(s=>s.active).length>0)&&this.childrens.length>0&&(this.childrens[0].active=!0),this.childrens.forEach(s=>{s.active&&this.toggle(s)})}}},Do=["selected-tab"],Eo={class:"header ml-4 flex justify-between",style:{"margin-bottom":"-1px"}},Fo={class:"flex flex-auto"},Mo=["onClick"],Oo=["onClick"];function jo(t,e,s,c,a,l){return n(),r("div",{class:"tabs flex flex-col flex-auto ns-tab overflow-hidden","selected-tab":l.activeComponent.identifier},[i("div",Eo,[i("div",Fo,[(n(!0),r(y,null,D(a.childrens,(o,d)=>(n(),r("div",{key:o.identifier,onClick:h=>l.toggle(o),class:m([s.active===o.identifier?"border-b-0 active z-10":"inactive","tab rounded-tl rounded-tr border px-2 py-1 cursor-pointer flex items-center"]),style:{"margin-right":"-1px"}},[i("span",null,f(o.label),1),o.closable?(n(),r("div",{key:0,onClick:h=>t.$emit("close",o),class:"ns-inset-button border border-box-edge text-xs hover:border-error-tertiary error rounded-full h-5 w-5 flex items-center justify-center ml-1"},[...e[0]||(e[0]=[i("i",{class:"las la-times"},null,-1)])],8,Oo)):u("",!0)],10,Mo))),128))]),i("div",null,[k(t.$slots,"extra")])]),k(t.$slots,"default")],8,Do)}const Ao=w(To,[["render",jo]]),Po={data(){return{selectedTab:{},tabStateSubscriber:null}},computed:{},mounted(){this.tabStateSubscriber=this.$parent.tabState.subscribe(t=>{this.selectedTab=t})},unmounted(){this.tabStateSubscriber.unsubscribe()},props:["label","closable","identifier","padding"]},Lo=["closable","label","identifier"];function Ro(t,e,s,c,a,l){return n(),r("div",{class:m([a.selectedTab.identifier!==s.identifier?"hidden":"","ns-tab-item flex flex-auto overflow-hidden"]),closable:s.closable,label:s.label,identifier:s.identifier},[a.selectedTab.identifier===s.identifier?(n(),r("div",{key:0,class:m(["border rounded flex-auto overflow-y-auto",s.padding||"p-4"])},[k(t.$slots,"default")],2)):u("",!0)],10,Lo)}const Ho=w(Po,[["render",Ro]]),Io={data:()=>({}),mounted(){},computed:{hasError(){return this.field.errors!==void 0&&this.field.errors.length>0},disabledClass(){return this.field.disabled?"ns-disabled cursor-not-allowed":""},inputClass(){return this.disabledClass+" "+this.leadClass},leadClass(){return this.leading?"p-8":"p-2"}},props:["placeholder","leading","type","field"]},Vo=["for"],Bo={class:"mt-1 relative border overflow-hidden rounded-md focus:shadow-sm mb-1"},Yo={key:0,class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},zo={class:"text-fontcolor-soft sm:text-sm sm:leading-5"},$o=["rows","disabled","id","type","placeholder"];function Uo(t,e,s,c,a,l){const o=x("ns-field-description");return n(),r("div",{class:m(["flex flex-col mb-2 flex-auto ns-textarea",l.hasError?"has-error":"is-pristine"])},[i("label",{for:s.field.name,class:"block leading-5 font-medium"},f(s.field.label),9,Vo),i("div",Bo,[s.leading?(n(),r("div",Yo,[i("span",zo,f(s.leading),1)])):u("",!0),A(i("textarea",{rows:s.field.data&&s.field.data.rows||10,disabled:s.field.disabled,"onUpdate:modelValue":e[0]||(e[0]=d=>s.field.value=d),onBlur:e[1]||(e[1]=d=>t.$emit("blur",this)),onChange:e[2]||(e[2]=d=>t.$emit("change",this)),id:s.field.name,type:s.type||s.field.type||"text",class:m([l.inputClass,"form-input block w-full sm:text-sm sm:leading-5"]),placeholder:s.placeholder},null,42,$o),[[L,s.field.value]])]),E(o,{field:s.field},null,8,["field"])],2)}const qo=w(Io,[["render",Uo]]),tu=Object.freeze(Object.defineProperty({__proto__:null,nsAlertPopup:te,nsAvatar:we,nsAvatarImage:Ce,nsButton:Le,nsCalendar:ae,nsCheckbox:Tt,nsCkeditor:ge,nsCloseButton:Mt,nsConfirmPopup:$,nsCrud:Ss,nsCrudForm:Xs,nsDate:rl,nsDateTimePicker:oe,nsDatepicker:Dl,nsDaterangePicker:Vl,nsDefaultAccounting:zl,nsDragzone:ii,nsField:Ni,nsFieldDescription:Zi,nsIconButton:en,nsInlineMultiselect:vn,nsInput:En,nsLink:tr,nsLinkedProductSelector:Gn,nsMaskedInput:ce,nsMaskedTextarea:fe,nsMediaInput:_d,nsMenu:jd,nsMultiselect:Qd,nsNotice:ve,nsNumpad:pe,nsNumpadPlus:ye,nsNumpadPopup:Jd,nsPOSLoadingPopup:_e,nsPageTitle:na,nsPaginate:xe,nsPromptPopup:ke,nsSearch:ba,nsSearchSelect:Da,nsSelect:La,nsSelectAudio:za,nsSpinner:Na,nsSubmenu:Xa,nsSwitch:ue,nsTableRow:So,nsTabs:Ao,nsTabsItem:Ho,nsTextarea:qo},Symbol.toStringTag,{value:"Module"}));export{Xs as N,Jd as _,jd as a,tu as b,Dl as c,Vl as d,oe as e,me as f,Ni as g,Le as h,Mt as i,Na as j,eu as k,Xa as n};
