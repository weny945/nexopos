import{_ as l}from"./lang-BINodpp-.js";import{_ as m}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{c as t,o as n,b as c,a,t as o,n as g,F as u,i as d}from"./runtime-core.esm-bundler-Cugm6hpa.js";const f={name:"ns-alipay-test-connection",data(){return{testing:!1,result:null}},methods:{__:l,testConnection(){this.testing=!0,this.result=null,nsHttpClient.post("/api/payment-codes/config/test",{type:"alipay"}).subscribe({next:s=>{this.testing=!1,s.success===!0?this.result={success:!0,message:s.message||l("Connection successful!"),details:JSON.stringify(s,null,2)}:this.result={success:!1,message:s.message||l("Connection failed"),details:JSON.stringify(s,null,2)}},error:s=>{this.testing=!1,this.result={success:!1,message:l("Connection failed: ")+(s.message||l("Unknown error")),details:JSON.stringify(s,null,2)}}})}}},p={class:"ns-alipay-test-connection"},b={class:"border border-box-edge rounded p-4 bg-box-background"},h={class:"font-semibold mb-2 text-fontcolor"},x={class:"text-sm text-fontcolor-light mb-3"},y={class:"flex items-center gap-2 flex-wrap"},C=["disabled"],k={key:0},w={key:1},v={key:0,class:"mt-3 p-3 bg-gray-100 rounded text-sm overflow-auto max-h-40"},N={class:"whitespace-pre-wrap text-xs text-fontcolor"};function S(s,r,T,A,e,i){return n(),t("div",p,[c("div",b,[c("h3",h,o(i.__("Test Connection")),1),c("p",x,o(i.__("Click the button below to test the Alipay configuration and connection.")),1),c("div",y,[c("button",{onClick:r[0]||(r[0]=(..._)=>i.testConnection&&i.testConnection(..._)),disabled:e.testing,class:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[e.testing?(n(),t("span",k,o(i.__("Testing...")),1)):(n(),t("span",w,o(i.__("Test Alipay Connection")),1))],8,C),e.result?(n(),t("span",{key:0,class:g([["text-sm",e.result.success?"text-green-500":"text-red-500"],"flex items-center"])},[e.result.success?(n(),t(u,{key:0},[d(" ✓ "+o(e.result.message),1)],64)):(n(),t(u,{key:1},[d(" ✗ "+o(e.result.message),1)],64))],2)):a("",!0)]),e.result&&e.result.details?(n(),t("div",v,[c("pre",N,o(e.result.details),1)])):a("",!0)])])}const V=m(f,[["render",S],["__scopeId","data-v-bb90943f"]]);export{V as default};
